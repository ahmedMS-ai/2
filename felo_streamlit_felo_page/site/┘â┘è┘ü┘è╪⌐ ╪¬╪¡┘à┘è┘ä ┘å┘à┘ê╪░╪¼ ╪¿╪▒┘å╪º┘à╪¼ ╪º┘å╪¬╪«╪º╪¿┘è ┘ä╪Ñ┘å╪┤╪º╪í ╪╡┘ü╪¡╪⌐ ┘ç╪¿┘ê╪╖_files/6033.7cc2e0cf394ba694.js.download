"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6033],{26033:function(e,t,n){n.r(t);var r=n(52676),i=n(75271),o=n(43378),a=n(25010),u=n(38793),l=n(25773),d=n(7717),s=n(39109),c=n(36551),f=n(84706),h=n(43215);t.default=()=>{let{isOpen:e,data:t,closeModal:n}=(0,h.Z)(),p=(0,d.useTranslations)(),g=(0,s.Z)(),[v,x]=(0,i.useState)(""),[b,m]=(0,i.useState)(!1),y=(0,i.useRef)(null);(0,i.useEffect)(()=>{t?x(t.title):x("")},[t]),(0,i.useEffect)(()=>{e&&setTimeout(()=>{if(y.current){y.current.focus();let e=y.current.value.length;y.current.setSelectionRange(e,e)}},100)},[e]);let S=async()=>{if(!(null==t?void 0:t.id))return;if(!v.trim()){g.error(p("topic.title_empty"));return}if(t.title===v){n();return}m(!0);let e=await t.onSave(t.id,v);m(!1),e?(f.$.publish("updateThreadTitle",{title:v,threadId:t.id}),t.onSaveSuccess&&t.onSaveSuccess(v),n()):g.error(p("titleFailed"))};return(0,r.jsx)(o.Vq,{open:e,onOpenChange:e=>{e||n()},children:(0,r.jsxs)(o.cZ,{hideCloseButton:!0,children:[(0,r.jsx)(o.fK,{children:(0,r.jsx)(o.$N,{children:p("edit_title")})}),(0,r.jsx)("div",{className:"py-4 px-4",children:(0,r.jsx)(u.Y,{ref:y,value:v,onChange:e=>x(e.target.value),maxLength:c.N2,minRows:1,maxRows:8,spellCheck:!1})}),(0,r.jsxs)(o.cN,{children:[(0,r.jsx)(a.z,{variant:"outline",onClick:n,children:p("cancel")}),(0,r.jsx)(a.z,{onClick:S,disabled:b||!t,children:b?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{className:"mr-2 h-4 w-4 animate-spin"}),p("save")]}):p("save")})]})]})})}},46988:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(35453),i=n(45173),o=n(75271),a=o.useLayoutEffect,u=function(e){var t=o.useRef(e);return a(function(){t.current=e}),t},l=function(e,t){if("function"==typeof e){e(t);return}e.current=t},d=function(e,t){var n=(0,o.useRef)();return(0,o.useCallback)(function(r){e.current=r,n.current&&l(n.current,null),n.current=t,t&&l(t,r)},[t])},s={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},c=function(e){Object.keys(s).forEach(function(t){e.style.setProperty(t,s[t],"important")})},f=null,h=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize},p=function(){},g=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],v=!!document.documentElement.currentStyle,x=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n=g.reduce(function(e,n){return e[n]=t[n],e},{}),r=n.boxSizing;if(""===r)return null;v&&"border-box"===r&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px");var i=parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),o=parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth);return{sizingStyle:n,paddingSize:i,borderSize:o}};function b(e,t,n){var r=u(n);o.useLayoutEffect(function(){var n=function(e){return r.current(e)};if(e)return e.addEventListener(t,n),function(){return e.removeEventListener(t,n)}},[])}var m=function(e){b(window,"resize",e)},y=function(e){b(document.fonts,"loadingdone",e)},S=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],w=o.forwardRef(function(e,t){var n=e.cacheMeasurements,a=e.maxRows,u=e.minRows,l=e.onChange,s=void 0===l?p:l,g=e.onHeightChange,v=void 0===g?p:g,b=(0,i.Z)(e,S),w=void 0!==b.value,j=o.useRef(null),z=d(j,t),R=o.useRef(0),C=o.useRef(),E=function(){var e,t,r,i,o,l,d,s,p,g,b,m=j.current,y=n&&C.current?C.current:x(m);if(y){C.current=y;var S=(e=m.value||m.placeholder||"x",void 0===(t=u)&&(t=1),void 0===(r=a)&&(r=1/0),f||((f=document.createElement("textarea")).setAttribute("tabindex","-1"),f.setAttribute("aria-hidden","true"),c(f)),null===f.parentNode&&document.body.appendChild(f),i=y.paddingSize,o=y.borderSize,d=(l=y.sizingStyle).boxSizing,Object.keys(l).forEach(function(e){f.style[e]=l[e]}),c(f),f.value=e,s=h(f,y),f.value=e,s=h(f,y),f.value="x",g=(p=f.scrollHeight-i)*t,"border-box"===d&&(g=g+i+o),s=Math.max(g,s),b=p*r,"border-box"===d&&(b=b+i+o),[s=Math.min(b,s),p]),w=S[0],z=S[1];R.current!==w&&(R.current=w,m.style.setProperty("height",w+"px","important"),v(w,{rowHeight:z}))}};return o.useLayoutEffect(E),m(E),y(E),o.createElement("textarea",(0,r.Z)({},b,{onChange:function(e){w||E(),s(e)},ref:z}))})},35453:function(e,t,n){n.d(t,{Z:function(){return r}});function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}},45173:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}},38793:function(e,t,n){n.d(t,{Y:function(){return c}});var r=n(98945),i=n(49975),o=n(82664),a=n(49336),u=n(75271),l=n(46988),d=n(52676),s=(0,o.Gp)(({style:e,minRows:t=3,maxRows:n=8,cacheMeasurements:o=!1,disableAutosize:s=!1,onHeightChange:c,...f},h)=>{let{Component:p,label:g,description:v,startContent:x,endContent:b,hasHelper:m,shouldLabelBeOutside:y,shouldLabelBeInside:S,isInvalid:w,errorMessage:j,getBaseProps:z,getLabelProps:R,getInputProps:C,getInnerWrapperProps:E,getInputWrapperProps:k,getHelperWrapperProps:F,getDescriptionProps:L,getErrorMessageProps:N}=(0,r.G)({...f,ref:h,isMultiline:!0}),[T,Z]=(0,u.useState)(t>1),[H,W]=(0,u.useState)(!1),B=g?(0,d.jsx)("label",{...R(),children:g}):null,O=C(),M=s?(0,d.jsx)("textarea",{...O,style:(0,a.d)(O.style,null!=e?e:{})}):(0,d.jsx)(l.Z,{...O,cacheMeasurements:o,"data-hide-scroll":(0,i.PB)(!H),maxRows:n,minRows:t,style:(0,a.d)(O.style,null!=e?e:{}),onHeightChange:(e,r)=>{1===t&&Z(e>=2*r.rowHeight),n>t&&W(e>=n*r.rowHeight),null==c||c(e,r)}}),P=(0,u.useMemo)(()=>x||b?(0,d.jsxs)("div",{...E(),children:[x,M,b]}):(0,d.jsx)("div",{...E(),children:M}),[x,O,b,E]);return(0,d.jsxs)(p,{...z(),children:[y?B:null,(0,d.jsxs)("div",{...k(),"data-has-multiple-rows":(0,i.PB)(T),children:[S?B:null,P]}),m?(0,d.jsx)("div",{...F(),children:w&&j?(0,d.jsx)("div",{...N(),children:j}):v?(0,d.jsx)("div",{...L(),children:v}):null}):null]})});s.displayName="NextUI.Textarea";var c=s}}]);