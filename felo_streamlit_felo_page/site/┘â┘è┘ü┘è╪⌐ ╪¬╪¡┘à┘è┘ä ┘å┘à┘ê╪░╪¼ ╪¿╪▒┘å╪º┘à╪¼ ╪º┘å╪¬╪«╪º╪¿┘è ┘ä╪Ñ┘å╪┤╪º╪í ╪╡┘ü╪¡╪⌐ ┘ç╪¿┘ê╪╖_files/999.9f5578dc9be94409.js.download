"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[999],{7543:function(e,t,s){s.d(t,{Z:function(){return a}});let a=(0,s(41650).Z)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},26449:function(e,t,s){s.d(t,{Z:function(){return N}});var a=s(52676),r=s(43378),o=s(7717),n=s(36551),c=s(29764),i=s(94247),l=s(28946),d=s(29197),u=s(67241),m=s(9455),h=s(95611),p=s(1937),g=s(25010),f=s(1167),v=s(75271),_=s(9369),x=s(17436),y=s(72696),j=e=>{let{selectItem:t,selectTopicClick:s,setIsSelf:r}=e,n=(0,o.useTranslations)(),{list:c}=(0,x.Z)(),i=(0,v.useMemo)(()=>{var e;if((null===(e=t.source_info)||void 0===e?void 0:e.is_self)===!1)return r(!1),t.source_info.name;r(!0);let s=c.find(e=>e.short_id===t.source_id);return(null==s?void 0:s.name)||""},[t]);return(0,a.jsxs)(y.h_,{children:[(0,a.jsx)(y.$F,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between w-full px-2 py-1  bg-white border border-gray-300 rounded-md shadow-sm cursor-pointer  hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2  focus:ring-indigo-500 dark:bg-[#202531] dark:border-[#545D6F]  dark:hover:bg-gray-700",children:[(0,a.jsx)("span",{className:"ml-2 mr-4 whitespace-nowrap",children:i||n("agent.please_select")}),(0,a.jsx)(_.Z,{size:20})]})}),(0,a.jsx)(y.AW,{"aria-label":"topic Changed",className:"p-2 overflow-auto rounded-lg dark:bg-[#454E5D] dark:border-[#2E3643]",style:{position:"relative",pointerEvents:"auto"},children:c.map(e=>(0,a.jsx)(y.Xi,{className:"text-[#1D3C6D] cursor-pointer hover:!bg-blue-100 hover:!text-[#1D3C6D] dark:text-[#EDF3FC] hover:dark:!bg-[#2E3643] hover:dark:!text-[#EDF3FC]",onClick:()=>{s(e)},children:e.name},e.short_id))})]})},b=s(84781),w=s(17112),N=e=>{let{item:t,onChange:s,index:_,children:y}=e,N=(0,o.useTranslations)(),[k,E]=(0,v.useState)(t),{isOpen:Z,onOpen:T,onClose:C}=(0,m.q)(),[S,z]=(0,v.useState)(!1),{getList:F,inited:A,list:D}=(0,x.Z)();(0,v.useEffect)(()=>{!A&&Z&&F()},[A,Z]);let J=[{value:n.gl,title:N("extension.all"),desc:N("extension.all_desc"),icon:(0,a.jsx)(c.Z,{size:16}),selected:!1},{value:n.Kp,title:N("extension.academic"),desc:N("extension.academic_desc"),icon:(0,a.jsx)(u.Od,{className:"w-4 h-4"}),selected:!1},{value:n.pN,title:N("extension.social"),desc:N("extension.social_desc"),icon:(0,a.jsx)(i.Z,{size:16}),selected:!1},{value:n.aI,title:N("extension.chat"),desc:N("agent.llm_use_last_answer"),icon:(0,a.jsx)(l.Z,{size:16}),selected:!1},{value:n.RQ,title:N("topics"),desc:N("agent.topics_desc"),icon:(0,a.jsx)(b.HV,{className:"w-4 h-4"}),selected:!1}];(0,v.useEffect)(()=>{E(t)},[t]);let P=e=>{E({...k,source_type:n.RQ,source_id:e.short_id,source_info:{name:e.name,is_self:!0}})},O=()=>{E({title:k.title,source_type:n.gl,source_id:""}),z(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.pn,{delayDuration:100,children:(0,a.jsxs)(f.u,{children:[(0,a.jsx)(f.aJ,{asChild:!0,children:y?v.cloneElement(y,{onClick:e=>{var t,s;null===(s=y.props)||void 0===s||null===(t=s.onClick)||void 0===t||t.call(s,e),T()}}):(0,a.jsx)(g.z,{size:"sm",variant:"ghost",onClick:T,className:"text-gray-500 dark:bg-[#202531] p-2 bg-[#FFFFFF] dark:text-white hover:bg-gray-50",children:(()=>{let e=J.find(e=>e.value===t.source_type);return e?e.icon:(0,a.jsx)(c.Z,{size:16})})()})}),(0,a.jsx)(f._v,{children:N("agent.select_search_type")})]})}),(0,a.jsx)(r.Vq,{open:Z,onOpenChange:C,children:(0,a.jsxs)(r.cZ,{className:"max-w-2xl w-full max-h-full dark:bg-[#454E5D]",children:[(0,a.jsx)(r.fK,{children:(0,a.jsx)(r.$N,{children:N("agent.select_search_type_title")})}),(0,a.jsx)(r.a7,{className:"pt-0",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(h.X,{label:N("agent.select_search_type_desc"),value:k.source_type||n.gl,classNames:{label:"dark:text-[#F3F5F7] text-sm"},onValueChange:e=>{E({...k,source_type:e})},children:(0,a.jsx)("div",{className:"border border-[#EBEEF3] dark:border-[#202531] rounded-md mt-1",children:J.map((e,t)=>(0,a.jsx)("div",{className:"flex items-center p-3 gap-2 w-full",children:(0,a.jsx)(p.J,{value:e.value,size:"sm",className:"w-full",isDisabled:e.value===n.RQ&&0===D.length&&!k.source_id,classNames:{labelWrapper:"w-full max-w-full",base:"w-full max-w-full ",label:"m-0",wrapper:"dark:bg-[#353B46] dark:border-[#353B46]"},children:(0,a.jsxs)("div",{className:"flex items-center gap-2 ml-1",children:[(0,a.jsx)("div",{className:"text-sm whitespace-nowrap mr-1",children:e.title}),(0,a.jsx)("div",{className:"text-xs text-gray-500 dark:text-[#D0D4DC] whitespace-nowrap",children:e.desc}),"topic"===e.value&&(0,a.jsxs)("div",{className:"ml-auto flex items-center",children:[(0,a.jsx)(j,{selectItem:k,selectTopicClick:P,setIsSelf:z}),!S&&(0,a.jsx)(g.z,{className:"p-1 h-auto ml-2",onClick:O,size:"sm",children:N("agent.reset")})]})]})})},t))})}),!S&&(0,a.jsxs)("div",{className:"text-xs text-[#f59a23] flex items-center gap-2",children:[(0,a.jsx)(d.Z,{size:16}),N("agent.reset_tip")]})]})}),(0,a.jsxs)(r.cN,{children:[(0,a.jsx)(g.z,{variant:"outline",className:"border-[#0080FF] dark:border-[#0694FF] text-[#0080FF] dark:text-[#0694FF] hover:text-[#0080FF] bg-transparent hover:bg-transparent",onClick:()=>{C(),E(t)},children:N("cancel")}),(0,a.jsx)(g.z,{onClick:()=>{if(k.source_type===n.RQ&&!k.source_id){w.Z.error(N("agent.select_topic"));return}s(_,k),C()},color:"primary",children:N("confirm")})]})]})})]})}},80999:function(e,t,s){s.r(t),s.d(t,{default:function(){return D}});var a=s(52676),r=s(75271),o=s(43378),n=s(74926),c=s(31022),i=s(36551),l=s(38188),d=s(65819),u=s(87106),m=s(17112),h=s(25010),p=s(59167),g=s(7543);let f=(0,s(41650).Z)("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);var v=s(65550),_=s(48958),x=s(37639),y=s(37766),j=s(17224),b=s(25994),w=s(52166),N=s(27976),k=s(5517);let E=async e=>{try{let t=(0,w.a1)(),s=await (0,k.Z)("".concat(N.XJ,"/threads/research/step"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(t)},body:JSON.stringify(e)});if(!s.ok){let e=await s.json().catch(()=>({}));if(422===s.status)return{success:!1,error:e.message||"failed to validate params",code:s.status};return{success:!1,error:e.message||"failed to get research step",code:s.status}}let a=await s.json();return{success:!0,data:a}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to get research step",code:500}}};var Z=s(7717),T=s(52090),C=s(26152),S=s(26449),z=s(48518),F=s(31063),A=s(60161),D=()=>{let e=(0,Z.useTranslations)(),{template:t,templateQuery:s,isAgentPlanModalOpen:w,setAgentPlanModalOpen:N,closeAgentPlanModal:k}=(0,n.Z)(),{setTemplateData:D}=(0,z.Z)(),J=(0,c.Z)(e=>e.endSearch),P=y.Z.getState().homeFiles,O=(0,c.Z)(e=>e.isTopicReply),X=(0,c.Z)(e=>e.extensionSelected),I=(0,j.useRouter)(),G=y.Z.getState().homeImages;(0,Z.useLocale)();let[R,q]=(0,r.useState)(!1),[V,L]=(0,r.useState)([]),[U,Q]=(0,r.useState)(!1);(0,r.useEffect)(()=>{try{var e;q(!!((null==t?void 0:t.params)&&(null==t?void 0:null===(e=t.params[0])||void 0===e?void 0:e.type)==="file"))}catch(e){console.log(e),q(!1)}},[t]);let B=(0,r.useMemo)(()=>!!t||X===i.Wh,[X,t]),K=(0,r.useMemo)(()=>y.Z.getState().homeFiles,[P]);(0,r.useEffect)(()=>{w&&(L([]),B?M():W())},[w]);let M=async()=>{if(!t)return;if(!s.replace(/[\r\n]+/g," ").trim()){L(t.sub_topics.map(e=>({content:e.title,source_type:e.source_type,source_id:e.source_id,source_info:e.source_info})));return}let{proSelected:a}=c.Z.getState(),r=a?i.NY:i.R_,o=localStorage.getItem(l.J.GTAG_EVENT_ACTIVATION)||d.ZP.getState().anonymousToken;Q(!0);let n=await (0,u.GK)(t.short_id,{query:s,mode:r,device_id:o});if(!n||!n.data||!n.success){m.Z.error((null==n?void 0:n.error)||e("agent.load_template_failed")),Q(!1);return}L(n.data.sub_queries.map((e,s)=>{var a,r,o,n,c,i;return{content:e,source_type:(null===(r=t.sub_topics)||void 0===r?void 0:null===(a=r[s])||void 0===a?void 0:a.source_type)||"google",source_id:(null===(n=t.sub_topics)||void 0===n?void 0:null===(o=n[s])||void 0===o?void 0:o.source_id)||"",source_info:(null===(i=t.sub_topics)||void 0===i?void 0:null===(c=i[s])||void 0===c?void 0:c.source_info)||void 0}})),Q(!1)},W=async()=>{if(!s)return;let{proSelected:t}=c.Z.getState(),a=t?i.NY:i.R_,r=localStorage.getItem(l.J.GTAG_EVENT_ACTIVATION)||d.ZP.getState().anonymousToken;Q(!0);let o=await E({query:s,mode:a,device_id:r});if(!o||!o.data||!o.success){m.Z.error((null==o?void 0:o.error)||e("error.research_failed")),Q(!1);return}L(o.data.steps.map(e=>({content:e,source_type:i.gl,source_id:""}))),Q(!1)},Y=(e,t)=>{L(V.map((s,a)=>a===e?{...s,content:t}:s))},$=(e,t)=>{L(V.map((s,a)=>a===e?{...s,source_type:t.source_type,source_id:t.source_id,source_info:t.source_info}:s))},H=e=>{V.length<=1||L(V.filter((t,s)=>s!==e))},ee=t=>{if(V.length>=b.o2){m.Z.warning(e("agent.max_steps_reached",{count:b.o2}));return}let s=[...V];s.splice(t+1,0,{content:"",source_type:i.gl,source_id:""}),L(s)},et=()=>{k(),J(),L([]),y.Z.getState().setIsGoToSearch(!1)},es=()=>{var e,a,r,o,c,l,d;let u={query:"",multiQuery:V.map(e=>({query:e.content,category:R?"chat_with_document":e.source_type||i.gl,source_id:e.source_id})),templateId:null===(e=n.Z.getState().template)||void 0===e?void 0:e.id};(null==K?void 0:null===(a=K.filter(e=>(null==e?void 0:e.status)==="completed"))||void 0===a?void 0:a.length)&&(u.category="chat_with_document",u.documents=null==K?void 0:null===(c=K.filter(e=>(null==e?void 0:e.status)==="completed"))||void 0===c?void 0:null===(o=c.map(e=>null==e?void 0:e.id))||void 0===o?void 0:o.join(",")),(null==G?void 0:null===(r=G.filter(e=>(null==e?void 0:e.status)==="completed"))||void 0===r?void 0:r.length)&&(u.category="chat_with_document",u.documents=null==G?void 0:null===(d=G.filter(e=>(null==e?void 0:e.status)==="completed"))||void 0===d?void 0:null===(l=d.map(e=>null==e?void 0:e.id))||void 0===l?void 0:l.join(",")),O&&(u.topicSource="topic"),D({templateQuery:s,template:t});let m=(0,x.MD)(u);I.push(m),et(),(0,F.fk)((null==t?void 0:t.system)?A.U.AGENT_EXECUTE:A.U.AGENT_CREATE_EXECUTE,{value:1},!0)};return(0,a.jsx)(o.Vq,{open:w,onOpenChange:e=>{e&&N(e),e||et()},children:(0,a.jsxs)(o.cZ,{className:"max-w-3xl w-full p-0 overflow-visible",hideCloseButton:!0,"aria-describedby":void 0,children:[(0,a.jsx)(C.T,{children:(0,a.jsx)(T.$N,{children:e("agent.agent_query_steps")})}),(0,a.jsxs)("div",{className:"p-8 relative max-h-[90vh] overflow-y-auto scrollbar",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-8",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold bg-gradient-to-r from-blue-600 to-blue-400 bg-clip-text text-transparent",children:e("agent.agent_query_steps")}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:e("agent.agent_query_steps_tip")})]}),(0,a.jsxs)(h.z,{size:"sm",variant:"outline",disabled:U,onClick:()=>{if(V.length>=b.o2){m.Z.warning(e("agent.max_steps_reached",{count:b.o2}));return}L([...V,{content:"",source_type:i.gl,source_id:""}])},className:"hover:bg-blue-50 dark:hover:bg-gray-600 transition-colors",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),e("agent.add_step")]})]}),U&&(0,a.jsx)("div",{className:"space-y-6",children:Array((null==t?void 0:t.sub_topics.length)||3).fill(0).map((e,t)=>(0,a.jsx)(v.X,{className:"rounded-lg",children:(0,a.jsx)("div",{className:"h-10 rounded-lg bg-default-300"})},t))}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)("div",{className:"space-y-6 relative",children:V.map((t,s)=>(0,a.jsxs)("div",{className:"flex items-center relative",children:[(0,a.jsx)("div",{className:"shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-medium shadow-md shadow-blue-100 dark:shadow-blue-600 transition-transform relative z-10",children:s+1}),s<V.length-1&&(0,a.jsx)("div",{className:"absolute left-4 top-8 w-[2px] h-[calc(100%+1rem)] bg-gradient-to-b from-blue-200 to-transparent -z-0"}),(0,a.jsxs)("div",{className:"ml-4 flex-1 flex items-center gap-2",children:[(0,a.jsx)(_.Y,{value:t.content,onValueChange:e=>Y(s,e),placeholder:e("agent.input_step_content"),variant:"flat"}),(0,a.jsxs)("div",{className:"flex gap-1",children:[!R&&(0,a.jsx)(S.Z,{item:{title:t.content,source_type:t.source_type,source_id:t.source_id,source_info:t.source_info},onChange:$,index:s}),(0,a.jsx)(h.z,{size:"sm",variant:"ghost",onClick:()=>ee(s),className:"hover:bg-blue-50 dark:hover:bg-gray-600",disabled:V.length>=b.o2,children:(0,a.jsx)(p.Z,{className:"w-4 h-4 text-blue-500"})}),V.length>1&&(0,a.jsx)(h.z,{size:"sm",variant:"ghost",onClick:()=>H(s),className:"hover:bg-red-50 dark:hover:bg-gray-600",children:(0,a.jsx)(g.Z,{className:"w-4 h-4 text-red-500"})})]})]})]},s))})}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,a.jsx)(h.z,{variant:"outline",className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-200",onClick:et,children:e("cancel")}),(0,a.jsxs)(h.z,{className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-md hover:from-blue-600 hover:to-blue-700 transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{U||es()},disabled:U||V.some(e=>!e.content.trim()),autoFocus:!0,children:[(0,a.jsx)(f,{className:"w-4 h-4 mr-1"}),e("execute")]})]})]})]})})}},25994:function(e,t,s){s.d(t,{$8:function(){return r},Kp:function(){return n},PN:function(){return o},o2:function(){return a}});let a=30,r="sys_translate_language",o="sys_target_language",n="sys_fixed_model"},87106:function(e,t,s){s.d(t,{Ef:function(){return v},GK:function(){return d},P:function(){return l},RV:function(){return p},VN:function(){return i},Vk:function(){return x},WN:function(){return y},YX:function(){return u},ZR:function(){return _},_Z:function(){return h},hX:function(){return m},hi:function(){return g},qP:function(){return f}});var a=s(27976),r=s(52166),o=s(65819),n=s(13263),c=s(5517);let i=async e=>{try{let t=(0,r.a1)(),s=await (0,c.Z)("".concat(a.XJ,"/threads/templates/").concat(e),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"".concat(t)}});if(!s.ok){let e=await s.json().catch(()=>({}));return{success:!1,error:e.message||"failed to get template",code:s.status,detail:e.detail}}let o=await s.json();return{success:!0,data:o}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to get template",code:500}}},l=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var t,s,o;let n=(0,r.a1)(),i=new URLSearchParams({system:(null===(t=e.system)||void 0===t||t).toString(),language:null!==(s=e.language)&&void 0!==s?s:"en",from_org:(null!==(o=null==e?void 0:e.from_org)&&void 0!==o&&o).toString()}),l=await (0,c.Z)("".concat(a.XJ,"/threads/templates?").concat(i),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"".concat(n)}});if(!l.ok){let e=await l.json().catch(()=>({}));return{success:!1,error:e.message||"failed to get templates",code:l.status}}let d=await l.json();return{success:!0,data:d}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to get templates",code:500}}},d=async(e,t)=>{try{let s=(0,r.a1)(),o=await (0,c.Z)("".concat(a.XJ,"/threads/templates/").concat(e,"/plan"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(s)},body:JSON.stringify(t)});if(!o.ok){let e=await o.json().catch(()=>({}));if(422===o.status)return{success:!1,error:e.message||"failed to validate params",code:o.status};return{success:!1,error:e.message||"failed to get template plan",code:o.status}}let n=await o.json();return{success:!0,data:n}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to get template plan",code:500}}},u=async e=>{try{let t=(0,r.a1)(),s=await (0,c.Z)("".concat(a.XJ,"/threads/templates"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(t)},body:JSON.stringify(e)});if(!s.ok){let e=await s.json().catch(()=>({}));if(422===s.status)return{success:!1,error:e.message||"failed to validate params",code:s.status};return{success:!1,error:e.message||"failed to create template",code:s.status}}let o=await s.json();return{success:!0,data:o}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to create template",code:500}}},m=async e=>{try{let t=(0,r.a1)(),s=await (0,c.Z)("".concat(a.XJ,"/threads/templates"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"".concat(t)},body:JSON.stringify({short_ids:e})});if(!s.ok){let e=await s.json().catch(()=>({}));if(422===s.status)return{success:!1,error:e.message||"failed to validate params",code:s.status};return{success:!1,error:e.message||"failed to delete templates",code:s.status}}return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to delete templates",code:500}}},h=async e=>{try{let t=(0,r.a1)(),{short_id:s,...o}=e,n=await (0,c.Z)("".concat(a.XJ,"/threads/templates/").concat(s),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"".concat(t)},body:JSON.stringify(o)});if(!n.ok){let e=await n.json().catch(()=>({}));if(422===n.status)return{success:!1,error:e.message||"failed to validate params",code:n.status};return{success:!1,error:e.message||"failed to update template",code:n.status}}let i=await n.json();return{success:!0,data:i}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to update template",code:500}}},p=async e=>{try{let t=(0,r.a1)(),s=await (0,c.Z)("".concat(a.XJ,"/threads/templates/generate"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(t)},body:JSON.stringify(e)});if(!s.ok){let e=await s.json().catch(()=>({}));if(422===s.status)return{success:!1,error:e.message||"failed to validate params",code:s.status};return{success:!1,error:e.message||"failed to generate template",code:s.status}}let o=await s.json();return{success:!0,data:o}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to generate template",code:500}}},g=async e=>{try{let t=(0,r.a1)(),s=await (0,c.Z)("".concat(a.XJ,"/threads/templates/").concat(e,"/resources?"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"".concat(t)}});if(!s.ok){let e=await s.json().catch(()=>({}));return{success:!1,error:e.message||"failed to get template topic",code:s.status}}let o=await s.json();return{success:!0,data:o}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to get templates",code:500}}},f=async e=>{var t,s,r;let i=(0,n.LP)();return(0,c.Z)("".concat(a.Ez,"/sharePermission/update"),{headers:{"Content-Type":"application/json",Authorization:"".concat(i)},body:JSON.stringify({business_id:e.agent_id,read_permission:e.read_permission,business_type:"AGENT",org_id:"PARTIAL_PUBLIC"===e.read_permission?null===(r=o.ZP.getState().userInfo)||void 0===r?void 0:null===(s=r.user_org_member)||void 0===s?void 0:null===(t=s.org)||void 0===t?void 0:t.org_id:null,access_emails:null==e?void 0:e.access_emails}),method:"POST"}).then(async e=>await e.json()).catch(e=>{console.log("\uD83D\uDE80 ~ error:",e)})},v=async e=>{let{topic_short_id:t}=e,s=(0,n.LP)();return(0,c.Z)("".concat(a.XJ,"/threads/templates/").concat(t,"/org_shares"),{headers:{"Content-Type":"application/json",Authorization:"".concat(s)},method:"POST"}).then(async e=>!![200,204].includes(e.status)).catch(()=>!1)},_=async e=>{let{topic_short_id:t}=e,s=(0,n.LP)();return(0,c.Z)("".concat(a.XJ,"/threads/templates/").concat(t,"/org_shares"),{headers:{"Content-Type":"application/json",Authorization:"".concat(s)},method:"DELETE"}).then(async e=>!![200,204].includes(e.status)).catch(()=>!1)},x=async(e,t)=>{try{let s=(0,r.a1)(),o=await (0,c.Z)("".concat(a.XJ,"/threads/templates/render_info?lang=").concat(e,"&code=").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"".concat(s)}});if(!o.ok)return{success:!1,code:500};let n=await o.json();return{success:!0,data:n}}catch(e){return{success:!1,code:500}}},y=async(e,t)=>{try{let s=(0,r.a1)(),o=await (0,c.Z)("".concat(a.XJ,"/threads/templates/").concat(e,"/save_user_tool_selections"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(s)},body:JSON.stringify({tools:t})});if(!o.ok){let e=await o.json().catch(()=>({}));return{success:!1,error:e.message||"failed to save tool selections",code:o.status,detail:e.detail}}return{success:!0,data:void 0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to save tool selections",code:500}}}},48518:function(e,t,s){let a=(0,s(75910).Ue)(e=>({currentData:void 0,templateData:void 0,setCurrentData:t=>e({currentData:t}),setTemplateData:t=>e({templateData:t}),clearCurrentData:()=>e({currentData:void 0}),clearTemplateData:()=>e({templateData:void 0})}));t.Z=a}}]);