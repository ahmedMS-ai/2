"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[853],{64412:function(e,t,a){a.d(t,{Q:function(){return o}});var n=a(52676),s=a(25568),r=a(4814);let o=e=>{var t;let{fileName:a,w:o,h:i}=e;switch((null===(t=a.split(".").pop())||void 0===t?void 0:t.toLowerCase())||""){case"pdf":return(0,n.jsx)(s.ce,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});case"doc":return(0,n.jsx)(s.yy,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});case"docx":return(0,n.jsx)(s.kS,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});case"xls":return(0,n.jsx)(s.Qk,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});case"ppt":return(0,n.jsx)(s.PJ,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});case"txt":return(0,n.jsx)(s.hu,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});case"xls":return(0,n.jsx)(s.q_,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});case"xlsx":return(0,n.jsx)(s.$g,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});case"md":return(0,n.jsx)(s.ep,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});case"csv":return(0,n.jsx)(s.o6,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});default:return(0,n.jsx)(s.X9,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")})}};t.Z=e=>{var t;let{fileName:a,w:o,h:i}=e;switch((null===(t=a.split(".").pop())||void 0===t?void 0:t.toLowerCase())||""){case"pdf":return(0,n.jsx)(s.X,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});case"doc":return(0,n.jsx)(s.LV,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});case"docx":return(0,n.jsx)(s.h_,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});case"txt":return(0,n.jsx)(s.Ot,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});case"png":return(0,n.jsx)(s.T3,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});case"jpg":case"jpeg":return(0,n.jsx)(s.Fc,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});case"tiff":return(0,n.jsx)(s.Hc,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});case"gif":return(0,n.jsx)(s.oq,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});case"webp":return(0,n.jsx)(s.et,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});case"csv":return(0,n.jsx)(s.u9,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});case"xls":return(0,n.jsx)(s.n9,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});case"xlsx":return(0,n.jsx)(s.HZ,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")});default:return(0,n.jsx)(s.vU,{className:(0,r.Z)(o?"w-".concat(o):"w-9",i?"h-".concat(i):"h-9")})}}},90488:function(e,t,a){var n=a(52676),s=a(92823),r=a(4814),o=a(8096),i=a(75271),l=a(25568);let c=e=>new Promise(t=>{let a=new window.Image;a.onload=()=>t(!0),a.onerror=()=>t(!1),a.src=e});t.Z=e=>{var t,a,d;let{width:u=16,height:m=16,src:h,title:p=""}=e,[f,g]=(0,i.useState)(!0),{hasHtml:v,...x}=e;if((0,i.useEffect)(()=>{h&&c(h).then(e=>{g(!e)})},[h]),h&&h.includes(".file"))switch((null===(a=p.split(".").pop())||void 0===a?void 0:a.toLowerCase())||""){case"pdf":return(0,n.jsx)(l.X,{width:u,height:m});case"doc":return(0,n.jsx)(l.LV,{width:u,height:m});case"docx":return(0,n.jsx)(l.h_,{width:u,height:m});case"txt":return(0,n.jsx)(l.Ot,{width:u,height:m})}return f||!h?(0,n.jsx)(o.Z,{width:u,height:m,className:(0,r.Z)("inline-block align-top",null===(d=e.classNames)||void 0===d?void 0:d.wrapper,v&&"text-[#8AC5FF]")}):(0,n.jsx)(s.J,{...x,width:u,height:m,alt:"",classNames:{wrapper:(0,r.Z)("inline-block align-top",null===(t=e.classNames)||void 0===t?void 0:t.wrapper)}})}},26894:function(e,t,a){var n=a(52676),s=a(19370),r=a(47649),o=a(8096),i=a(75271),l=a(11782),c=a(7717),d=a(4590);t.Z=e=>{let{language:t,onChangeLanguage:a,hideAutoDetect:u=!1,template:m}=e,h=(0,c.useTranslations)(),p=(0,c.useLocale)(),f=(0,i.useMemo)(()=>{var e,t;return(null==m?void 0:null===(t=m.sub_topics)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.title)=="ppt_generation"?l.g$.filter(e=>d.Po[e.value]):[...l.g$]},[l.g$,m]);return(0,i.useEffect)(()=>{var e,n;(null==m?void 0:null===(n=m.sub_topics)||void 0===n?void 0:null===(e=n[0])||void 0===e?void 0:e.title)!="ppt_generation"||d.Po[t]||a(p||"en")},[m,t]),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[!u&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex-none flex items-center justify-center rounded-md border border-input bg-[#F6F7F9] dark:bg-[#454E5D] ring-offset-background file:border-0  file:bg-transparent file:text-sm file:font-medium  file:text-foreground placeholder:text-muted-foreground  focus-visible:outline-none focus-visible:ring-2  focus-visible:ring-ring focus-visible:ring-offset-2  disabled:cursor-not-allowed disabled:opacity-50  md:text-sm cursor-not-allowed w-fit px-3 text-sm h-8",children:h("agent.auto_detect")}),(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(r.Z,{className:"w-4 h-4"})})]}),(0,n.jsxs)(s.Ph,{defaultValue:t,onValueChange:a,children:[(0,n.jsxs)(s.i4,{className:"w-fit gap-2 h-8 bg-[#F6F7F9] dark:bg-[#454E5D]",children:[u&&(0,n.jsx)(o.Z,{className:"w-4 h-4"}),(0,n.jsx)(s.ki,{})]}),(0,n.jsx)(s.Bw,{className:"language-select-dropdown",children:f.map(e=>(0,n.jsx)(s.Ql,{value:e.value,children:e.label},e.value))})]})]})}},96156:function(e,t,a){a.d(t,{Z:function(){return M}});var n=a(52676),s=a(75271),r=a(7717),o=a(96164),i=a(26595),l=a(51054),c=a(26997),d=a(43378),u=a(17224),m=a(31063),h=a(60161),p=a(65105),f=a(37766),g=a(89335),v=a(70262),x=a(84706),_=a(65819),y=a(57546),w=a(4814),b=a(31022),j=a(36551),F=a(38058),E=a(93071),N=a(6428),Z=a(60904),S=a(9369),k=a(59167),A=a(39071),C=a(57207),P=a(25010),I=a(64412),T=a(27976),D=e=>{let{handleClick:t,isMini:a,loading:o,filesList:l,historyFiles:c,threadId:d,disabled:u}=e,m=(0,r.useTranslations)(),{files:h,threadFiles:p,setFiles:g,removeFilesById:v}=(0,f.Z)(),x=e=>{v([e]),d||(0,F.lc)({ids:[e]})},_=(0,s.useCallback)((e,t)=>{var s;return(0,n.jsxs)(P.z,{size:"sm",variant:"ghost",className:(0,w.Z)("h-8 hover:bg-[#EDFAFF] hover:text-primary px-1 gap-1 dark:hover:bg-[#3E536E]",a?"min-w-8 w-8 rounded-full":""),disabled:t,children:[(0,n.jsx)("span",{className:"w-5 h-5 flex items-center justify-center font-medium",children:a?(0,n.jsx)(N.Z,{className:"!w-[18px] !h-[18px]"}):(0,n.jsx)(I.Z,{fileName:e.title})}),a?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{className:"inline-block text-xs truncate flex-1 max-w-20 sm:max-w-24 md:max-w-28 lg:max-w-56 xl:max-w-96",children:[T.r8?"[".concat(null!==(s=null==e?void 0:e.words)&&void 0!==s?s:0,"] "):"",e.title]})," ",(0,n.jsx)("span",{className:"flex items-center justify-center h-4 w-4 min-w-4 min-h-4 text-[#7f94b1] cursor-pointer hover:bg-gray-200  rounded-full text-xs",onClick:t=>{t.preventDefault(),t.stopPropagation(),x(null==e?void 0:e.id)},children:(0,n.jsx)(Z.Z,{size:1,className:"scale-75 rounded-full"})})]})]},e.id)},[]);return(0,n.jsxs)(C.J2,{children:[(0,n.jsx)(C.xo,{asChild:!0,children:(null==l?void 0:l.length)===1?_(h[0],o):(0,n.jsxs)(P.z,{size:"sm",variant:"ghost",className:(0,w.Z)("h-8 hover:bg-[#EDFAFF] hover:text-primary px-1 gap-1 dark:hover:bg-[#3E536E]",a?"min-w-8 w-8 rounded-full":""),disabled:o||u,children:[(0,n.jsx)("span",{className:"w-4 h-4 flex items-center justify-center font-medium",children:(0,n.jsx)(N.Z,{className:"!w-[18px] !h-[18px]"})}),a?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"inline-block text-xs truncate flex-1 max-w-20 sm:max-w-24 md:max-w-28 lg:max-w-56 xl:max-w-96",children:m("searchAddition.file_count",{count:(null==l?void 0:l.length)||0})}),(0,n.jsx)(S.Z,{})]})]})}),(0,n.jsx)(C.yk,{className:"p-0 min-w-60 !z-41 rounded-xl border-[#efefef] shadow-lg dark:border-[#222]",children:(0,n.jsxs)("div",{className:"p-0 w-full",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-1 text-xs py-2.5 px-3 border-b-1 border-[#EBEEF3] dark:border-[#222]",children:[(0,n.jsx)("div",{className:"text-xs font-medium",children:m("searchAddition.addition_file_title")}),(0,n.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,n.jsxs)(P.z,{variant:"ghost",size:"sm",className:(0,w.Z)("mr-2","h-6 px-1 gap-1 min-w-4 font-normal text-xs","hover:bg-[#EDFAFF] dark:hover:bg-[#3E536E]"),onClick:t,children:[(0,n.jsx)(k.Z,{size:12,className:"scale-85"}),m("searchAddition.add")]}),d?null:(0,n.jsxs)(P.z,{variant:"ghost",size:"sm",className:(0,w.Z)("h-6 px-1 gap-1 min-w-4 font-normal text-xs","hover:bg-[#EDFAFF] dark:hover:bg-[#3E536E]"),onClick:()=>{if(!d){let e=f.Z.getState().homeFiles.map(e=>e.id);(0,F.lc)({ids:e})}g([])},children:[(0,n.jsx)(A.Z,{size:12,className:"scale-85"}),m("searchAddition.remove")]})]})]}),(0,n.jsx)("div",{className:"px-2 py-3",children:l.concat(c).map(e=>{var t;let a=null==c?void 0:c.some(t=>t.id===e.id);return(0,n.jsxs)("div",{className:(0,w.Z)("flex items-center justify-between gap-1 text-xs py-1.5 text-gray-500 px-1 rounded","hover:bg-[#EDFAFF] dark:hover:bg-[#3E536E]"),children:[(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",{className:"w-4 h-4 flex items-center justify-center font-medium",children:(0,n.jsx)(I.Z,{fileName:e.title})}),(0,n.jsxs)(E.O,{className:(0,w.Z)("inline-block text-xs truncate flex-1 max-w-48"),size:"sm",isDisabled:a,children:[T.r8?"[".concat(null!==(t=null==e?void 0:e.words)&&void 0!==t?t:0,"] "):"",e.title]})]}),!a&&(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(i.A,{variant:"light",className:"m-0 p-0 h-4 w-4 min-w-4 min-h-4 text-[#7f94b1]",size:"sm",isIconOnly:!0,startContent:(0,n.jsx)(Z.Z,{size:12}),onPress:()=>x(e.id)})})]},e.id)})})]})})]})},z=a(97247),L=a(41223),O=a(74926),R=a(39109),B=a(78236),U=a(88708),J=a(21230);let G=(0,s.forwardRef)((e,t)=>{var a,E;let{isMini:N,threadId:Z,loading:S,type:k,mode:A,historyFiles:C,disabled:P,template:I,isUseFileNewEngine:T=!1}=e,G=(0,r.useTranslations)(),M=(0,u.useRouter)(),V=(0,p.WI)(),H=(0,R.Z)(),{homeFiles:X,setHomeFiles:W,files:$,setFiles:Q,isUploading:q,setIsUploading:Y,threadFiles:K,currentFileProgress:ee,setCurrentFileProgress:et,previousSearchCategory:ea,setPreviousSearchCategory:en,homeImages:es,isImageUploading:er,setNThUpload:eo}=(0,f.Z)(),ei=(0,_.ZP)(e=>e.isLogin),el=(0,p.P2)(),ec=(0,p.Oi)("chatDocumentsUsage"),[ed,eu]=(0,s.useState)(!1),[em,eh]=(0,s.useState)(!1),ep=(0,s.useRef)(null),[ef,eg]=(0,s.useState)(!0),ev=()=>"home"===k?f.Z.getState().homeFiles:f.Z.getState().files,ex=(0,s.useMemo)(()=>"home"===k?f.Z.getState().homeFiles:f.Z.getState().files,[k,$,X]),e_=(0,s.useMemo)(()=>ec?v.Mr:v.CD,[ec]),ey=(0,s.useMemo)(()=>{if(!ec){var e,t;return(null!==(t=null==el?void 0:null===(e=el.chatDocumentsUsage)||void 0===e?void 0:e.balance)&&void 0!==t?t:0)<=0}return!1},[null==el?void 0:el.chatDocumentsUsage,ec]),ew=()=>{var e,t;return"home"===k?(null===(e=f.Z.getState().homeFiles)||void 0===e?void 0:e.length)||0:(null===(t=f.Z.getState().files)||void 0===t?void 0:t.length)||0},eb=e=>{let{type:t}=e,a="home"===t?f.Z.getState().homeFiles:f.Z.getState().files,n=f.Z.getState().threadFiles;return Array.from(new Set([...(Z?(null==a?void 0:a.filter(e=>(null==e?void 0:e.threadId)===Z))||[]:(null==a?void 0:a.filter(e=>!(null==e?void 0:e.threadId)))||[]).map(e=>null==e?void 0:e.id),...(Z&&(null==n?void 0:n.filter(e=>(null==e?void 0:e.threadId)===Z))||[]).map(e=>null==e?void 0:e.id)]))},ej=(0,s.useMemo)(()=>{var e;return((null===(e=eb({type:k}))||void 0===e?void 0:e.length)||0)+((null==C?void 0:C.length)||0)>e_},[e_,null==C?void 0:C.length]),eF=(0,s.useMemo)(()=>V?v.fc:v.r0,[V]),eE=(0,s.useMemo)(()=>{let e="home"===k?X||[]:$||[],t=Z&&(null==K?void 0:K.filter(e=>(null==e?void 0:e.threadId)===Z))||[];return Array.from(new Set([...e,...t].map(e=>e.id))).map(a=>[...e,...t].find(e=>e.id===a)).reduce((e,t)=>{var a;return e+(null!==(a=null==t?void 0:t.words)&&void 0!==a?a:0)},0)>eF},[k,X,$,Z,K,eF]),eN=(0,s.useMemo)(()=>V?G("searchAddition.max_words"):G("searchAddition.max_words_free"),[V]),eZ=()=>{b.Z.getState().setExtensionSelected(ea||j.gl),en(null)},eS=e=>["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain","text/csv","application/csv"].includes(e.type)?e.size>26214400?(H.default(G("searchAddition.size_limit_exceeded_tip",{size:25,pages:500})),(null==$?void 0:$.length)||eZ(),!1):eE?(H.default(G("searchAddition.thread_words_limit_exceeded_tip",{words:eN})),(null==$?void 0:$.length)||eZ(),!1):!ej||(V||x.$.publish("showSubscriptionPlan",void 0),H.default(G("searchAddition.thread_upload_limit_exceeded_tip",{count:e_})),!1):(H.default(G("topic.error_file_type_not_supported")),(null==$?void 0:$.length)||eZ(),!1),ek=async e=>{var t,a,n,s,r;if(q)return;if(ey){x.$.publish("showSubscriptionPlan",void 0);return}if(ej)return;let o=null===(t=eb({type:k}))||void 0===t?void 0:t.length;if((null!==(a=null==e?void 0:e.length)&&void 0!==a?a:0)+o>e_){if(!V){x.$.publish("showSubscriptionPlan",void 0);return}H.default(G("searchAddition.thread_upload_limit_exceeded_tip",{count:e_}));return}eo((null!==(n=f.Z.getState().nThUpload)&&void 0!==n?n:0)+1);let i=Array.from(e);Y(!0),b.Z.getState().setExtensionSelected(j.J5);let l=[];for(let[e,t]of Array.from(i).entries()){l.push(e);let a=ev(),n=null!==(s=f.Z.getState().nThUpload)&&void 0!==s?s:0,r="".concat(n,"_").concat(e),o=[{id:r,title:t.name,size:(0,v.sS)(t.size),token:0,pages:0,progress:0,status:"uploading",type:t.type,created_at:new Date().toISOString(),modified_at:new Date().toISOString(),length:0,words:0,threadId:Z||"",tempId:r}];"home"===k&&W([...o,...a])}for(let[e,t]of Array.from(i).entries()){let a=null!==(r=f.Z.getState().nThUpload)&&void 0!==r?r:0,n="".concat(a,"_").concat(e);Y(!0),et(0);try{if(await (0,F.Wl)()){if(V?H.default(G("searchAddition.upload_limit_exceeded_tip")):x.$.publish("showSubscriptionPlan",void 0),Y(!1),et(0),"home"===k){let e=ev();W((0,v._n)({files:e,tempId:n}))}continue}}catch(e){if(H.default(G("server.INTERNAL_SERVER_ERROR")),Y(!1),et(0),"home"===k){let e=ev();W((0,v._n)({files:e,tempId:n}))}continue}new FormData().append("file",t);let s="";if(!eS(t)){if("home"===k){let e=ev();W((0,v._n)({files:e,tempId:n}))}Y(!1),et(0);continue}(0,m.fk)(h.U.SEAECH_FILE,{fileName:t.name},!0),Y(!0),"1"!==(0,v.y6)()&&(eu(!0),(0,v.ny)());try{await (0,g.tX)({file:t,threadId:Z||"",queryParams:(0,J.x)(t.type)&&T?{from:"agent"}:void 0,onUploadProgress:e=>{et(e);let t=ev();"home"===k?W(t.map(t=>t.tempId===n?{...t,progress:e,status:"uploading"}:t)):Q(t.map(t=>t.tempId===n?{...t,progress:e,status:"uploading"}:t))},onParseStart:()=>{console.log("onParseStart...",n);let e=ev();"home"===k?W(e.map(e=>e.tempId===n?{...e,progress:100,status:"analyzing"}:e)):Q(e.map(e=>e.tempId===n?{...e,progress:100,status:"analyzing"}:e))},onParseProgress:a=>{if(s||(s=a.file_id),s&&n){var r,o;let n=null!==(r=f.Z.getState().nThUpload)&&void 0!==r?r:0,i=ev(),l="home"===k?i.map(t=>t.tempId==="".concat(n,"_").concat(e)?{...t,id:s}:t):[{id:s,title:t.name,size:(0,v.sS)(t.size),token:0,pages:0,progress:null!==(o=f.Z.getState().currentFileProgress)&&void 0!==o?o:0,status:"uploading",type:t.type,created_at:new Date().toISOString(),modified_at:new Date().toISOString(),length:(null==a?void 0:a.length)||0,words:(null==a?void 0:a.words)||0,threadId:Z||""}];"home"===k?W([...l]):Q([...l])}},onDone:e=>{if((null==e?void 0:e.status)==="SUCCESS"){var t;let a=ev(),n=a.reduce((e,t)=>{var a;return e+(null!==(a=null==t?void 0:t.words)&&void 0!==a?a:0)},0);if(eE||n+(null!==(t=null==e?void 0:e.words)&&void 0!==t?t:0)>eF){if(H.default(G("searchAddition.thread_words_limit_exceeded_tip",{words:eN})),"home"===k){let e=ev();W((0,v.mF)({files:e,id:s}))}else Q([...(0,v.mF)({files:a,id:s})]);Y(!1);return}"home"===k?W(a.map(t=>t.id===s?{...t,progress:100,words:(null==e?void 0:e.words)||0,pages:(null==e?void 0:e.page_count)||0,status:"completed"}:t)):Q(a.map(t=>t.id===s?{...t,progress:100,words:(null==e?void 0:e.words)||0,pages:(null==e?void 0:e.page_count)||0,status:"completed"}:t)),Y(!1);return}(null==e?void 0:e.status)==="PAGE_OVER_SIZE"?H.default(G("searchAddition.page_limit_exceeded_tip",{pages:"500"})):H.default(G("server.INTERNAL_SERVER_ERROR"));let a=ev();if("home"===k){let e=ev();W((0,v.mF)({files:e,id:s}))}else Q([...(0,v.mF)({files:a,id:s})]);Y(!1),et(0)},onError:e=>{"402"!==e&&H.default(G("server.INTERNAL_SERVER_ERROR")),Y(!1);let t=ev();if("home"===k){let e=ev(),t=(0,v.mF)({files:e,id:s,tempId:n});W(t)}else Q([...(0,v.mF)({files:t,id:s,tempId:n})]);et(0)}})}catch(t){H.default(G("server.INTERNAL_SERVER_ERROR")),Y(!1),et(0);let e=ev();if("home"===k){let e=ev();W((0,v.mF)({files:e,id:s}))}else Q([...(0,v.mF)({files:e,id:s})])}}ew()||(et(0),eZ())};(0,s.useImperativeHandle)(t,()=>({handleFiles:ek}));let eA=()=>{var e;if((null==I?void 0:I.code)==="ppt_generation_v2"&&(0,m.fk)(h.U.HOME_PAGE_TAB_SLIDES_FILE,{value:h.U.HOME_PAGE_TAB_SLIDES_FILE},!0),(null==I?void 0:I.code)==="html_agent"&&(0,m.fk)(h.U.HOME_PAGE_TAB_WEBPAGE_FILE,{value:h.U.HOME_PAGE_TAB_WEBPAGE_FILE},!0),(0,L.s2)()){eh(!0);return}if(!ei){y.Z.getState().setLoginModalVisible(!0);return}if(ey){x.$.publish("showSubscriptionPlan",void 0);return}let t=((null==C?void 0:C.length)||0)+$.length;if(ej||t>=e_){V||x.$.publish("showSubscriptionPlan",void 0),H.default(G("searchAddition.thread_upload_limit_exceeded_tip",{count:e_}));return}null===(e=ep.current)||void 0===e||e.click()};return(0,s.useEffect)(()=>{let e=O.Z.getState().template,t=!!e&&(0,U.uI)(e);((null==ex?void 0:ex.length)||(null==es?void 0:es.length))&&!t&&(O.Z.getState().clearTemplate(),ea===j.Wh&&en(null)),(null==ex?void 0:ex.length)?b.Z.getState().setExtensionSelected(j.J5):(null==es?void 0:es.length)?b.Z.getState().setExtensionSelected(j.Ys):ef||eZ(),eg(!1)},[ex.length,X.length,$.length,es.length]),(0,s.useEffect)(()=>{let e=e=>{(async()=>{try{await Promise.all([f.Z.getState().setFiles([]),f.Z.getState().setHomeFiles([]),f.Z.getState().setHomeImages([]),f.Z.getState().setIsGoToSearch(!1),f.Z.getState().setHomeImagesQustions([]),B.Z.getState().setFiles([]),B.Z.getState().setHomeFiles([]),B.Z.getState().setHomeImages([]),B.Z.getState().setIsGoToSearch(!1),B.Z.getState().setHomeImagesQustions([])])}catch(e){console.error("Failed to clear search addition store:",e)}})()};return M.events.on("routeChangeStart",e),()=>{M.events.off("routeChangeStart",e)}},[M.events]),(0,n.jsxs)(n.Fragment,{children:[(0,z.N0)()||(0,z.Eg)()?null:(0,n.jsxs)("div",{className:"max-w-fit text-[#30394A] dark:text-[#FFFFFF] relative z-10 h-8 border border-[#E6E9EF] dark:border-[#545D6F] rounded-lg",children:[(0,n.jsx)("input",{type:"file",ref:ep,className:"hidden",multiple:!0,accept:".pdf,.doc,.docx,.txt,.xls,.xlsx,.csv,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",onChange:e=>{let{files:t}=e.target,a=b.Z.getState().extensionSelected;en(a===j.J5||a===j.Ys?null:a),t&&ek(t),e.target.value=""}}),!q&&ex.concat(C).length&&"home"!==k?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(D,{handleClick:eA,isDraggingDisabled:ej,maxFileCount:e_,isMini:N,loading:S,filesList:ex,threadId:Z,historyFiles:C,disabled:P})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(o.e,{delay:0,closeDelay:0,content:ec?G("searchAddition.add_file_tip"):G("searchAddition.add_file_tip_free",{count:(null==el?void 0:null===(a=el.chatDocumentsUsage)||void 0===a?void 0:a.balance)||0}),classNames:{content:["text-white bg-gray-600 dark:bg-[#353535]"]},children:"home"===k?(0,n.jsx)(i.A,{variant:"light",size:"sm",className:(0,w.Z)("gap-1 mx-0 px-1 h-8","min-w-8","text-sm","flex items-center"),isDisabled:q||er||S||(null==es?void 0:es.length)>0,startContent:(0,n.jsx)(c.Z,{size:18}),onPress:eA,radius:N?"full":"sm",disabled:P,children:((null==I?void 0:I.code)==="ppt_generation_v2"||(null==I?void 0:I.code)==="html_agent")&&(0,n.jsx)("div",{className:"text-sm leading-[1.2]",children:G("add_file")})}):(0,n.jsx)(i.A,{variant:"light",size:"sm",className:(0,w.Z)("gap-1 mx-0 px-1",q?"text-primary":"text-inherit","min-w-8","text-inherit"),isDisabled:q||er||S||(null==es?void 0:es.length)>0||(null==X?void 0:X.length)>0||P,color:q?"primary":"default",startContent:q?(()=>{let e=null==$?void 0:$.find(e=>"uploading"===e.status);return(null==$?void 0:$.find(e=>"analyzing"===e.status))?(0,n.jsx)(l.Z,{"aria-label":"Analyzing...",classNames:{svg:"w-6 h-6"},size:"sm"}):e&&ee>0?(0,n.jsx)(l.Z,{"aria-label":"Uploading...",classNames:{svg:"w-6 h-6"},size:"sm",value:ee,showValueLabel:!0}):(0,n.jsx)(l.Z,{"aria-label":"Loading...",classNames:{svg:"w-6 h-6"},size:"sm"})})():(0,n.jsx)(c.Z,{size:18}),onPress:eA,radius:N?"full":"sm"})})})]}),(0,n.jsx)(d.Vq,{open:ed,onOpenChange:eu,children:(0,n.jsxs)(d.cZ,{className:"w-80 rounded-lg overflow-hidden",hideCloseButton:!0,"aria-describedby":"to_web_use_file_upload_tip",children:[(0,n.jsx)(d.a7,{className:"text-gray-500 text-sm leading-6 text-center",children:(0,n.jsx)("p",{dangerouslySetInnerHTML:{__html:null===(E=G(V?"searchAddition.first_use_file_upload_tip_pro":"searchAddition.first_use_file_upload_tip"))||void 0===E?void 0:E.replace("Felo Pro","<span class='text-red-500'>Felo Pro</span>")}})}),(0,n.jsx)("div",{className:"flex justify-center p-0 sm:flex-col border-t-1 border-gray-200 dark:border-[#27272A]",children:(0,n.jsx)(i.A,{className:"w-full rounded-none bg-transparent",onPress:()=>{eu(!1)},children:G("searchAddition.first_use_file_upload_btn")})})]})}),(0,n.jsx)(d.Vq,{open:em,onOpenChange:eh,children:(0,n.jsxs)(d.cZ,{className:"w-2/3 rounded-lg overflow-hidden",hideCloseButton:!0,"aria-describedby":"to_web_use_file_upload_tip",children:[(0,n.jsx)(d.a7,{className:"text-gray-500 text-sm leading-6 text-center",children:(0,n.jsx)("p",{children:G("searchAddition.to_web_use_file_upload_tip")})}),(0,n.jsx)("div",{className:"flex justify-center p-0 sm:flex-col border-t-1 border-gray-200 dark:border-[#27272A]",children:(0,n.jsx)(i.A,{className:"w-full rounded-none bg-transparent",onPress:()=>{eh(!1)},children:G("searchAddition.to_web_use_file_upload_btn")})})]})})]})});G.displayName="AddFile";var M=G},70113:function(e,t,a){a.d(t,{Z:function(){return k}});var n=a(52676),s=a(75271),r=a(7717),o=a(96164),i=a(26595),l=a(51054),c=a(71686),d=a(4814),u=a(43378),m=a(97247),h=a(65105),p=a(56885),f=a(31022),g=a(37766),v=a(41223),x=a(93071),_=a(59167),y=a(39071),w=a(60904),b=a(57207),j=a(25010),F=a(38058),E=a(64412),N=a(70262),Z=e=>{let{handleClick:t,maxCount:a,imageList:o,historyImages:l,threadId:u,loading:m,disabled:p}=e,f=(0,r.useTranslations)(),v=(0,h.Oi)("chatDocumentsUsage"),{threadImages:Z,setThreadImages:S}=(0,g.Z)(),k=(0,s.useMemo)(()=>v?N.Mr:N.CD,[v]),A=e=>{S(Z.filter(t=>t.id!==e))};return(0,n.jsxs)(b.J2,{children:[(0,n.jsx)(b.xo,{asChild:!0,children:(0,n.jsx)(j.z,{size:"sm",variant:"ghost",className:(0,d.Z)("h-8 hover:bg-[#EDFAFF] hover:text-primary px-1 gap-1 dark:hover:bg-[#3E536E]"),disabled:m||p,children:(0,n.jsx)("span",{className:"w-4 h-4 flex items-center justify-center font-medium",children:(0,n.jsx)(c.Z,{className:"!w-[18px] !h-[18px]"})})})}),(0,n.jsx)(b.yk,{className:"p-0 min-w-60 !z-41 rounded-xl border-[#efefef] shadow-lg dark:border-[#222]",children:(0,n.jsxs)("div",{className:"p-0 w-full",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-1 text-xs py-2.5 px-3 border-b-1 border-[#EBEEF3] dark:border-[#222]",children:[(0,n.jsx)("div",{className:"text-xs font-medium",children:f("searchAddition.addition_image_title")}),(0,n.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,n.jsxs)(j.z,{variant:"ghost",size:"sm",className:(0,d.Z)("mr-2","h-6 px-1 gap-1 min-w-4 font-normal text-xs","hover:bg-[#EDFAFF] dark:hover:bg-[#3E536E]"),onClick:t,disabled:m||o.length>=a||o.concat(l).length>=k,children:[(0,n.jsx)(_.Z,{size:12,className:"scale-85"}),f("searchAddition.add")]}),u?null:(0,n.jsxs)(j.z,{variant:"ghost",size:"sm",className:(0,d.Z)("h-6 px-1 gap-1 min-w-4 font-normal text-xs","hover:bg-[#EDFAFF] dark:hover:bg-[#3E536E]"),onClick:()=>{if(!u){let e=g.Z.getState().threadImages.map(e=>e.id);(0,F.lc)({ids:e})}S([])},children:[(0,n.jsx)(y.Z,{size:12,className:"scale-85"}),f("searchAddition.remove")]})]})]}),(0,n.jsx)("div",{className:"px-2 py-3",children:o.concat(l).map(e=>{let t=null==l?void 0:l.some(t=>t.id===e.id);return(0,n.jsxs)("div",{className:(0,d.Z)("flex items-center justify-between gap-1 text-xs py-1.5 text-gray-500 px-1 rounded","hover:bg-[#EDFAFF] dark:hover:bg-[#3E536E]"),children:[(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",{className:"w-4 h-4 flex items-center justify-center font-medium",children:(0,n.jsx)(E.Z,{fileName:e.title,w:4,h:4})}),(0,n.jsx)(x.O,{className:(0,d.Z)("inline-block text-xs truncate flex-1 max-w-48"),size:"sm",isDisabled:t,children:e.title})]}),!t&&(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(i.A,{variant:"light",className:"m-0 p-0 h-4 w-4 min-w-4 min-h-4 text-[#7f94b1]",size:"sm",isIconOnly:!0,startContent:(0,n.jsx)(w.Z,{size:12}),onPress:()=>A(e.id)})})]},e.id)})})]})})]})};let S=(0,s.forwardRef)((e,t)=>{var a;let{isMini:x,threadId:_,historyImages:y,disabled:w}=e,b=(0,r.useTranslations)(),j=(0,f.Z)(e=>e.loading),{isImageUploading:F,homeImages:E,threadImages:N,isUploading:S,currentFileProgress:k,homeFiles:A}=(0,g.Z)(),C=(0,h.P2)(),P=(0,h.Oi)("chatDocumentsUsage"),[I,T]=(0,s.useState)(!1),{choiseFiles:D,fileInputChange:z}=(0,p.Z)({threadId:_}),L=(0,s.useRef)(null),O=(0,s.useMemo)(()=>null==N?void 0:N.filter(e=>!(null==y?void 0:y.some(t=>t.id===e.id))),[N,y]),R=()=>{if((0,v.s2)()){T(!0);return}D({ref:L})};return(0,n.jsxs)(n.Fragment,{children:[(0,m.N0)()||(0,m.Eg)()?null:(0,n.jsxs)("div",{className:"max-w-fit text-[#30394A] dark:text-[#FFFFFF] relative h-8 z-10 border border-[#E6E9EF] dark:border-[#545D6F] rounded-lg",children:[(0,n.jsx)("input",{type:"file",ref:L,className:"hidden",multiple:!1,accept:".jpg,.jpeg,.png,.tiff,.svg,.webp,.gif",onChange:z}),_&&!F&&O.concat(y).length?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(Z,{handleClick:R,maxCount:1,loading:j,imageList:O,threadId:_,historyImages:null==y?void 0:y.reverse(),disabled:w})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(o.e,{delay:0,closeDelay:0,content:P?b("search_attached_image.add_image_tip"):b("search_attached_image.add_image_tip_free",{count:(null==C?void 0:null===(a=C.chatDocumentsUsage)||void 0===a?void 0:a.balance)||0}),classNames:{content:["text-white bg-gray-600 dark:bg-[#353535]"]},children:(0,n.jsx)(i.A,{variant:"light",size:"sm",className:(0,d.Z)("gap-1 mx-0 px-1","min-w-8"),isDisabled:w||F||S||j||!_&&((null==E?void 0:E.length)>0||(null==A?void 0:A.length)>0),startContent:F&&_?k<=0?(0,n.jsx)(l.Z,{"aria-label":"Loading...",classNames:{svg:"w-6 h-6"},size:"sm"}):(0,n.jsx)(l.Z,{"aria-label":"Loading...",classNames:{svg:"w-6 h-6"},size:"sm",value:k,showValueLabel:!0}):(0,n.jsx)(c.Z,{size:18}),onPress:R,radius:x?"full":"sm"})})})]}),(0,n.jsx)(u.Vq,{open:I,onOpenChange:()=>{},children:(0,n.jsxs)(u.cZ,{className:"w-2/3 rounded-lg overflow-hidden",hideCloseButton:!0,children:[(0,n.jsx)(u.a7,{className:"text-gray-500 text-sm leading-6 text-center",children:(0,n.jsx)("p",{children:b("search_attached_image.to_app_use_image_search_tip")})}),(0,n.jsxs)("div",{className:"flex justify-center p-0 sm:flex-col border-t-1 border-gray-200 dark:border-[#27272A]",children:[(0,n.jsx)(i.A,{className:"w-1/2 rounded-none bg-transparent border-r-1 border-gray-200 dark:border-[#27272A]",onPress:()=>{T(!1)},children:b("search_attached_image.to_app_use_image_search_btn_cancel")}),(0,n.jsx)(i.A,{className:"w-1/2 rounded-none bg-transparent",color:"primary",variant:"light",onPress:()=>{(0,m.s)()?window.open("https://apps.apple.com/us/app/felo-search-the-world/id6598782546"):window.open("https://play.google.com/store/apps/details?id=ai.felo.search"),T(!1)},children:b("search_attached_image.to_app_use_image_search_btn")})]})]})})]})});S.displayName="AddImage";var k=S},50464:function(e,t,a){var n=a(52676),s=a(7717),r=a(8096),o=a(96164),i=a(31022),l=a(38188),c=a(75271),d=a(84781);t.Z=e=>{let{isReply:t}=e,a=(0,s.useTranslations)(),{isTopicSearchNetwork:u,setIsTopicSearchNetwork:m}=(0,i.Z)(),h=e=>{m(e),localStorage.setItem(l.J.TOPIC_WEB_SEARCH,e?"true":"false")};return(0,c.useEffect)(()=>{let e=localStorage.getItem(l.J.TOPIC_WEB_SEARCH);e&&m("true"===e)},[]),(0,n.jsxs)("div",{className:"flex h-8 items-center gap-2",children:[(0,n.jsx)(o.e,{classNames:{content:["text-white bg-gray-600 dark:bg-[#353535]"]},content:a(u?"topic.online_answer":"topic.offline_answer"),children:(0,n.jsxs)("div",{onClick:()=>h(!u),className:"flex justify-center gap-2 text-sm cursor-pointer ".concat(u&&"text-[#0080FF]"),children:[u?(0,n.jsx)(r.Z,{size:20}):(0,n.jsx)(d.x5,{className:"w-5 h-5"}),a("topic.web_search")]})}),t&&(0,n.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:"|"})]})}},76011:function(e,t,a){a.d(t,{F:function(){return s}}),a(52676),a(26595),a(91840),a(34180),a(48958),a(64657),a(5687),a(55383),a(93650),a(49983),a(3501),a(49264),a(7534),a(9455),a(54313);var n=a(75271);let s="felo_search_setting";t.Z=()=>((0,n.useEffect)(()=>{localStorage.getItem(s)&&localStorage.removeItem(s)},[]),null)},53986:function(e,t,a){a.d(t,{_:function(){return c}});var n=a(52676),s=a(75271),r=a(20280),o=a(2808),i=a(37481);let l=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.f,{ref:t,className:(0,i.cn)(l(),a),...s})});c.displayName=r.f.displayName},19370:function(e,t,a){a.d(t,{Bw:function(){return g},DI:function(){return u},Ph:function(){return d},Ql:function(){return v},U$:function(){return x},i4:function(){return h},ki:function(){return m}});var n=a(52676),s=a(75271),r=a(18669),o=a(9369),i=a(80145),l=a(91165),c=a(37481);let d=r.fC,u=r.ZA,m=r.B4,h=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,n.jsxs)(r.xz,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-[10px] border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[s,(0,n.jsx)(r.JO,{asChild:!0,children:(0,n.jsx)(o.Z,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=r.xz.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,n.jsx)(i.Z,{className:"h-4 w-4"})})});p.displayName=r.u_.displayName;let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})});f.displayName=r.$G.displayName;let g=s.forwardRef((e,t)=>{let{className:a,children:s,position:o="popper",...i}=e;return(0,n.jsx)(r.h_,{children:(0,n.jsxs)(r.VY,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===o&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:o,...i,children:[(0,n.jsx)(p,{}),(0,n.jsx)(r.l_,{className:(0,c.cn)("p-1","popper"===o&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,n.jsx)(f,{})]})})});g.displayName=r.VY.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=r.__.displayName;let v=s.forwardRef((e,t)=>{let{className:a,children:s,...o}=e;return(0,n.jsxs)(r.ck,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...o,children:[(0,n.jsx)("span",{className:"absolute right-3 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(r.wU,{children:(0,n.jsx)(l.Z,{className:"h-6 w-6 text-felo-text-brand dark:text-felo-text-brand-dark"})})}),(0,n.jsx)(r.eT,{children:s})]})});v.displayName=r.ck.displayName;let x=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...s})});x.displayName=r.Z0.displayName},26949:function(e,t,a){a.d(t,{SP:function(){return c},dr:function(){return l},mQ:function(){return i},nU:function(){return d}});var n=a(52676),s=a(75271),r=a(1262),o=a(37481);let i=r.fC,l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.aV,{ref:t,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...s})});l.displayName=r.aV.displayName;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.xz,{ref:t,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...s})});c.displayName=r.xz.displayName;let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.VY,{ref:t,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s})});d.displayName=r.VY.displayName},31442:function(e,t,a){a.d(t,{e:function(){return n}});let n={AdvancedAssistantDisable:"extension.advanced_assistant_disable",LoginExpired:"extension.login_expired",Timeout:"extension.timeout"}},25994:function(e,t,a){a.d(t,{$8:function(){return s},Kp:function(){return o},PN:function(){return r},o2:function(){return n}});let n=30,s="sys_translate_language",r="sys_target_language",o="sys_fixed_model"},2240:function(e,t,a){var n=a(75271);t.Z=function(){let e=(0,n.useRef)(!0);return(0,n.useEffect)(()=>{let t=()=>{e.current=!1},a=()=>{e.current=!0};return window.addEventListener("compositionstart",t),window.addEventListener("compositionend",a),()=>{window.removeEventListener("compositionstart",t),window.removeEventListener("compositionend",a)}},[]),e}},57591:function(e,t,a){var n=a(75271);t.Z=function(e){let[t,a]=(0,n.useState)(e),s=(0,n.useRef)(t);return(0,n.useEffect)(()=>{s.current=t},[t]),[t,(0,n.useCallback)(e=>{"function"==typeof e?a(t=>{let a=e(t);return s.current=a,a}):(s.current=e,a(e))},[]),s]}},56885:function(e,t,a){var n=a(7717),s=a(75271),r=a(70262),o=a(84706),i=a(65105),l=a(31022),c=a(36551),d=a(37766),u=a(65819),m=a(38058),h=a(31063),p=a(60161),f=a(89335),g=a(39109);t.Z=e=>{let{threadId:t}=e,a=(0,n.useTranslations)(),v=(0,i.WI)(),x=(0,g.Z)(),{setCurrentFileProgress:_,previousSearchCategory:y,setPreviousSearchCategory:w,setIsOpenFirstUseModal:b,isImageUploading:j,setIsImageUploading:F,homeImages:E,setHomeImages:N,setThreadImages:Z,setHomeImagesQustions:S,setNThUpload:k,removeHomeImageSById:A}=(0,d.Z)(),C=(0,u.ZP)(e=>e.isLogin),P=(0,i.P2)(),I=(0,i.Oi)("chatDocumentsUsage"),T=(0,s.useMemo)(()=>v?r.sn:r.w8,[v]),D=(0,s.useMemo)(()=>!1,[null==P?void 0:P.chatDocumentsUsage,I]),z=(0,s.useMemo)(()=>(null==E?void 0:E.length)>T,[T,null==E?void 0:E.length]),L=()=>{let e=d.Z.getState().homeImages,a=d.Z.getState().threadImages;return t?(null==a?void 0:a.length)||0:(null==e?void 0:e.length)||0},O=()=>{l.Z.getState().setExtensionSelected(y||c.gl),w(null)},R=e=>["image/jpeg","image/png","image/tiff","image/gif","image/webp"].includes(e.type)?e.size>26214400?(x.default(a("search_attached_image.size_limit_exceeded_tip",{size:25})),!1):!z||(x.default(a("search_attached_image.file_count_limit_exceeded_tip",{count:T})),!1):(x.default(a("search_attached_image.unsupported_image_type_tip")),!1),B=()=>{if(!j){if(!C){o.$.publish("showLogin",void 0);return}if(D){o.$.publish("showSubscriptionPlan",void 0);return}if(z){x.default(a("search_attached_image.file_count_limit_exceeded_tip",{count:T}));return}return!0}},U=e=>{var a;let n=null!==(a=d.Z.getState().currentFileProgress)&&void 0!==a?a:0,s=setInterval(()=>{var a,r;let o=t?d.Z.getState().threadImages:d.Z.getState().homeImages,i=t?Z:N;n=(null!==(r=null===(a=o.find(t=>t.id===e))||void 0===a?void 0:a.progress)&&void 0!==r?r:n)+(1.9*Math.random()+.1),i(o.map(t=>t.id===e?{...t,progress:Math.min(n,90),status:"analyzing"}:t)),n>=90&&clearInterval(s)},800);return s},J=async e=>{var n,s,o,i;if(!B())return;let u=d.Z.getState().homeImages,g=d.Z.getState().threadImages;if((t?g:u).length>=T){x.default(a("search_attached_image.file_count_limit_exceeded_tip",{count:T}));return}k((null!==(n=d.Z.getState().nThUpload)&&void 0!==n?n:0)+1);let v=Array.from(e);F(!0),l.Z.getState().setExtensionSelected(c.Ys);let y=[];for(let[e,a]of Array.from(v).entries()){y.push(e);let n=t?d.Z.getState().threadImages:d.Z.getState().homeImages,i=t?Z:N,l=null!==(s=d.Z.getState().nThUpload)&&void 0!==s?s:0,c=new FileReader,u="".concat(l,"_").concat(e),m=URL.createObjectURL(a),h=[{id:u,title:a.name,size:(0,r.sS)(a.size),token:0,pages:0,progress:null!==(o=d.Z.getState().currentFileProgress)&&void 0!==o?o:0,status:"uploading",type:a.type,created_at:new Date().toISOString(),modified_at:new Date().toISOString(),length:0,words:0,threadId:t||"",url:m,tempId:u}];console.log("reader",c,a),i([...h,...n])}let w=new Map;for(let[e,n]of Array.from(v).entries()){let s=null!==(i=d.Z.getState().nThUpload)&&void 0!==i?i:0,o="".concat(s,"_").concat(e);F(!0),_(0),new FormData().append("file",n);let l="";if(!R(n)){F(!1),_(0);let e=t?d.Z.getState().threadImages:d.Z.getState().homeImages;(t?Z:N)([...(0,r._n)({files:e,tempId:o})]);continue}(0,h.fk)(p.U.CHAT_IMAGE,{fileName:n.name},!0),F(!0);let c=(0,r.ct)(0,e=>{_(null!=e?e:0);let a=t?d.Z.getState().threadImages:d.Z.getState().homeImages;(t?Z:N)(a.map(t=>t.tempId===o?{...t,progress:e}:t))});"1"!==(0,r.y6)()&&(b(!0),(0,r.ny)());try{w.set(n.name,!0),await (0,f.Vj)({file:n,threadId:t||"",onProgress:a=>{if(l||(l=a.file_id),!w.has(l)){var s;let a=null!==(s=d.Z.getState().nThUpload)&&void 0!==s?s:0,r=t?d.Z.getState().threadImages:d.Z.getState().homeImages,o=t?Z:N,i=r.map(t=>t.tempId==="".concat(a,"_").concat(e)?{...t,id:l}:t);o([...i]);let c=U(l);w.set(l,c),w.delete(n.name)}},onDone:async e=>{if(console.log("progress",e),c(),w.has(l),(null==e?void 0:e.status)==="SUCCESS"){let a=t?d.Z.getState().threadImages:d.Z.getState().homeImages,n=t?Z:N,s=await (0,m.S6)({id:l});F(!1),console.log("imageQustions",s),clearInterval(w.get(l)),w.delete(l),S([...s]),n(a.map(t=>t.id===l?{...t,progress:100,words:(null==e?void 0:e.words)||0,status:"completed"}:t));return}(null==e?void 0:e.status)==="PAGE_OVER_SIZE"?x.default(a("searchAddition.page_limit_exceeded_tip",{pages:"500"})):x.default(a("server.INTERNAL_SERVER_ERROR")),A([l]),F(!1),_(0)},onError:()=>{x.default(a("server.INTERNAL_SERVER_ERROR")),c(),w.delete(n.name),0===w.size&&F(!1),A([l])}})}catch(e){c(),x.default(a("server.INTERNAL_SERVER_ERROR")),F(!1),A([l]),_(0)}}L()||(O(),_(0))};return{isInsufficientBalance:D,isFileCountLimitExceeded:z,isValidImageFile:R,simulateProgress:U,choiseFiles:e=>{var t;let{ref:a}=e;B()&&(null==a||null===(t=a.current)||void 0===t||t.click())},isValidPermission:B,fileInputChange:e=>{let{files:t}=e.target,a=l.Z.getState().extensionSelected;w(a===c.Ys?null:a),console.log("files",t),t&&J(t),e.target.value=""},uploadFiles:J}}},87106:function(e,t,a){a.d(t,{Ef:function(){return v},GK:function(){return d},P:function(){return c},RV:function(){return p},VN:function(){return l},Vk:function(){return _},WN:function(){return y},YX:function(){return u},ZR:function(){return x},_Z:function(){return h},hX:function(){return m},hi:function(){return f},qP:function(){return g}});var n=a(27976),s=a(52166),r=a(65819),o=a(13263),i=a(5517);let l=async e=>{try{let t=(0,s.a1)(),a=await (0,i.Z)("".concat(n.XJ,"/threads/templates/").concat(e),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"".concat(t)}});if(!a.ok){let e=await a.json().catch(()=>({}));return{success:!1,error:e.message||"failed to get template",code:a.status,detail:e.detail}}let r=await a.json();return{success:!0,data:r}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to get template",code:500}}},c=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var t,a,r;let o=(0,s.a1)(),l=new URLSearchParams({system:(null===(t=e.system)||void 0===t||t).toString(),language:null!==(a=e.language)&&void 0!==a?a:"en",from_org:(null!==(r=null==e?void 0:e.from_org)&&void 0!==r&&r).toString()}),c=await (0,i.Z)("".concat(n.XJ,"/threads/templates?").concat(l),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"".concat(o)}});if(!c.ok){let e=await c.json().catch(()=>({}));return{success:!1,error:e.message||"failed to get templates",code:c.status}}let d=await c.json();return{success:!0,data:d}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to get templates",code:500}}},d=async(e,t)=>{try{let a=(0,s.a1)(),r=await (0,i.Z)("".concat(n.XJ,"/threads/templates/").concat(e,"/plan"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(a)},body:JSON.stringify(t)});if(!r.ok){let e=await r.json().catch(()=>({}));if(422===r.status)return{success:!1,error:e.message||"failed to validate params",code:r.status};return{success:!1,error:e.message||"failed to get template plan",code:r.status}}let o=await r.json();return{success:!0,data:o}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to get template plan",code:500}}},u=async e=>{try{let t=(0,s.a1)(),a=await (0,i.Z)("".concat(n.XJ,"/threads/templates"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(t)},body:JSON.stringify(e)});if(!a.ok){let e=await a.json().catch(()=>({}));if(422===a.status)return{success:!1,error:e.message||"failed to validate params",code:a.status};return{success:!1,error:e.message||"failed to create template",code:a.status}}let r=await a.json();return{success:!0,data:r}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to create template",code:500}}},m=async e=>{try{let t=(0,s.a1)(),a=await (0,i.Z)("".concat(n.XJ,"/threads/templates"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"".concat(t)},body:JSON.stringify({short_ids:e})});if(!a.ok){let e=await a.json().catch(()=>({}));if(422===a.status)return{success:!1,error:e.message||"failed to validate params",code:a.status};return{success:!1,error:e.message||"failed to delete templates",code:a.status}}return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to delete templates",code:500}}},h=async e=>{try{let t=(0,s.a1)(),{short_id:a,...r}=e,o=await (0,i.Z)("".concat(n.XJ,"/threads/templates/").concat(a),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"".concat(t)},body:JSON.stringify(r)});if(!o.ok){let e=await o.json().catch(()=>({}));if(422===o.status)return{success:!1,error:e.message||"failed to validate params",code:o.status};return{success:!1,error:e.message||"failed to update template",code:o.status}}let l=await o.json();return{success:!0,data:l}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to update template",code:500}}},p=async e=>{try{let t=(0,s.a1)(),a=await (0,i.Z)("".concat(n.XJ,"/threads/templates/generate"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(t)},body:JSON.stringify(e)});if(!a.ok){let e=await a.json().catch(()=>({}));if(422===a.status)return{success:!1,error:e.message||"failed to validate params",code:a.status};return{success:!1,error:e.message||"failed to generate template",code:a.status}}let r=await a.json();return{success:!0,data:r}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to generate template",code:500}}},f=async e=>{try{let t=(0,s.a1)(),a=await (0,i.Z)("".concat(n.XJ,"/threads/templates/").concat(e,"/resources?"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"".concat(t)}});if(!a.ok){let e=await a.json().catch(()=>({}));return{success:!1,error:e.message||"failed to get template topic",code:a.status}}let r=await a.json();return{success:!0,data:r}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to get templates",code:500}}},g=async e=>{var t,a,s;let l=(0,o.LP)();return(0,i.Z)("".concat(n.Ez,"/sharePermission/update"),{headers:{"Content-Type":"application/json",Authorization:"".concat(l)},body:JSON.stringify({business_id:e.agent_id,read_permission:e.read_permission,business_type:"AGENT",org_id:"PARTIAL_PUBLIC"===e.read_permission?null===(s=r.ZP.getState().userInfo)||void 0===s?void 0:null===(a=s.user_org_member)||void 0===a?void 0:null===(t=a.org)||void 0===t?void 0:t.org_id:null,access_emails:null==e?void 0:e.access_emails}),method:"POST"}).then(async e=>await e.json()).catch(e=>{console.log("\uD83D\uDE80 ~ error:",e)})},v=async e=>{let{topic_short_id:t}=e,a=(0,o.LP)();return(0,i.Z)("".concat(n.XJ,"/threads/templates/").concat(t,"/org_shares"),{headers:{"Content-Type":"application/json",Authorization:"".concat(a)},method:"POST"}).then(async e=>!![200,204].includes(e.status)).catch(()=>!1)},x=async e=>{let{topic_short_id:t}=e,a=(0,o.LP)();return(0,i.Z)("".concat(n.XJ,"/threads/templates/").concat(t,"/org_shares"),{headers:{"Content-Type":"application/json",Authorization:"".concat(a)},method:"DELETE"}).then(async e=>!![200,204].includes(e.status)).catch(()=>!1)},_=async(e,t)=>{try{let a=(0,s.a1)(),r=await (0,i.Z)("".concat(n.XJ,"/threads/templates/render_info?lang=").concat(e,"&code=").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"".concat(a)}});if(!r.ok)return{success:!1,code:500};let o=await r.json();return{success:!0,data:o}}catch(e){return{success:!1,code:500}}},y=async(e,t)=>{try{let a=(0,s.a1)(),r=await (0,i.Z)("".concat(n.XJ,"/threads/templates/").concat(e,"/save_user_tool_selections"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(a)},body:JSON.stringify({tools:t})});if(!r.ok){let e=await r.json().catch(()=>({}));return{success:!1,error:e.message||"failed to save tool selections",code:r.status,detail:e.detail}}return{success:!0,data:void 0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"failed to save tool selections",code:500}}}},8529:function(e,t,a){a.d(t,{Dv:function(){return p},KA:function(){return m},Lf:function(){return h},Mn:function(){return l},QB:function(){return c},i0:function(){return i},z6:function(){return d},zk:function(){return u}});var n=a(27976),s=a(13263),r=a(5517),o=a(63023);let i=async e=>{let t=new FormData;return t.append("file",e.file),(0,r.Z)("".concat(n.Ez,"/htmlPPT/asset/upload"),{method:"POST",headers:(0,s.Fe)(),body:t,signal:e.signal}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>{if("AbortError"===e.name)throw e;return e})},l=async(e,t)=>{let a=(0,o.ui)(e);return(0,r.Z)("".concat(n.Ez,"/htmlPPT/template/create"),{method:"POST",headers:(0,s.Fe)(),body:JSON.stringify(a),signal:t}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>{if("AbortError"===e.name)throw e;return e})},c=async(e,t)=>{let a=(0,o.ui)(e);return(0,r.Z)("".concat(n.Ez,"/htmlPPT/template/update"),{method:"POST",headers:(0,s.Fe)(),body:JSON.stringify(a),signal:t}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>{if("AbortError"===e.name)throw e;return e})},d=async e=>{let t=new URLSearchParams({current:(null==e?void 0:e.current)||"1",size:e.size||"15"});return(0,r.Z)("".concat(n.Ez,"/htmlPPT/template/pageList?").concat(t),{method:"GET",headers:(0,s.Fe)(),signal:e.signal}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>{if("AbortError"===e.name)throw e;return e})},u=async e=>(0,r.Z)("".concat(n.Ez,"/htmlPPT/template/delete"),{method:"POST",headers:(0,s.Fe)(),body:JSON.stringify(e),signal:e.signal}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>{if("AbortError"===e.name)throw e;return e}),m=async(e,t)=>(0,r.Z)("".concat(n.Ez,"/htmlPPT/palette/generateByColor"),{method:"POST",headers:(0,s.Fe)(),body:JSON.stringify(e),signal:t}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>{if("AbortError"===e.name)throw e;return e}),h=async(e,t)=>(0,r.Z)("".concat(n.Ez,"/htmlPPT/palette/generateByColor"),{method:"POST",headers:(0,s.Fe)(),body:JSON.stringify(e),signal:t}).then(async e=>200!==e.status?Promise.reject(e):await e.json()).catch(e=>{if("AbortError"===e.name)throw e;return e}),p=async(e,t)=>{let a=new URLSearchParams({uuid:null==e?void 0:e.uuid});return(0,r.Z)("".concat(n.Ez,"/htmlPPT/template/query?").concat(a),{method:"GET",headers:(0,s.Fe)(),signal:t}).then(async e=>{if(200!==e.status)return Promise.reject(e);let t=await e.json();return null==t?void 0:t.data}).catch(e=>{if("AbortError"===e.name)throw e;return e})}},38058:function(e,t,a){a.d(t,{S6:function(){return l},Wl:function(){return o},lc:function(){return i}});var n=a(27976),s=a(13263),r=a(5517);let o=async()=>{let e=(0,s.LP)();return(0,r.Z)("".concat(n.EG,"/file/upload/limit"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"".concat(e)}}).then(async e=>{if(null==e?void 0:e.ok){var t;if(200!==e.status)return!0;let a=await e.json();return null===(t=null==a?void 0:a.data)||void 0===t||t}throw Error("failure")}).catch(e=>{throw console.log("error",e),Error("failure")})},i=async e=>{let{ids:t}=e,a=(0,s.LP)();return(0,r.Z)("".concat(n.EG,"/file/delete"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(a)},body:JSON.stringify(t)})},l=async e=>{let{id:t}=e,a=(0,s.LP)();return t?(0,r.Z)("".concat(n.XJ,"/threads/analytics/").concat(t,"/image"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(a)}}).then(async e=>{if(null==e?void 0:e.ok){if(200!==e.status)return[];let t=await e.json();return console.log("fetchAnalyticsImage response",t),t||[]}return[]}).catch(e=>(console.log("error",e),[])):[]}},13366:function(e,t,a){var n=a(75910),s=a(98496),r=a(11782);let o="agent-params-storage",i=()=>{try{let t=localStorage.getItem(o);if(t){var e;let a=JSON.parse(t);return(null===(e=a.state)||void 0===e?void 0:e.language)||""}}catch(e){console.error("Failed to parse stored language:",e)}try{if("undefined"!=typeof navigator){let e=navigator.language||navigator.userLanguage,t=r.g$.find(t=>t.value===e);if(t)return t.value;let a=e.split("-")[0],n=r.g$.find(e=>e.value===a||e.value.startsWith(a+"-"));if(n)return n.value;if("zh"===a){if(e.includes("CN")||e.includes("SG"))return"zh-Hans";return e.includes("TW")||e.includes("HK")||e.includes("MO"),"zh-Hant"}}}catch(e){console.error("Failed to get browser language:",e)}return"en"},l=(0,n.Ue)()((0,s.tJ)(e=>({language:i(),setLanguage:t=>e(()=>({language:t})),initializeLanguage:t=>e(e=>e.language?e:{language:t})}),{name:o,partialize:e=>({language:e.language}),skipHydration:!0}));t.Z=l},54296:function(e,t,a){var n=a(8529),s=a(63023);let r=(0,a(75910).Ue)((e,t)=>({template:null,setTemplate:t=>e({template:t}),editTemplate:null,setEditTemplate:t=>e({editTemplate:t}),templateList:[],setTemplateList:t=>e({templateList:t}),updateTemplateInList:t=>{e(e=>{let a=e.templateList.findIndex(e=>e.id===t.id);if(-1===a)return{templateList:[t,...e.templateList]};{let n=[...e.templateList];return n[a]=t,{templateList:n}}})},showCreationNotes:!1,setShowCreationNotes:t=>e({showCreationNotes:t}),isOpenUpload:!1,setIsOpenUpload:t=>e({isOpenUpload:t}),isOpenDropDownMenu:!1,setIsOpenDropDownMenu:t=>e({isOpenDropDownMenu:t}),isGetListLoading:!1,setIsGetListLoading:t=>e({isGetListLoading:t}),getTemplateList:async e=>{var a,r;let{current:o,size:i}=e;t().setIsGetListLoading(!0);let l=await (0,n.z6)({current:o,size:i});if(t().setIsGetListLoading(!1),(null==l?void 0:l.status)!==200)return;let c=null==l?void 0:null===(r=l.data)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.map(e=>(0,s.P2)(e));t().setTemplateList(c||[])},colorPalette:null,setColorPalette:t=>e({colorPalette:t}),hotColorPalette:null,setHotColorPalette:t=>e({hotColorPalette:t}),colorPaletteList:[],setColorPaletteList:t=>e({colorPaletteList:t}),updateColorPaletteList:t=>{e(e=>(console.log("state.colorPaletteList",e.colorPaletteList),{colorPaletteList:[t,...e.colorPaletteList.filter(e=>!(null==e?void 0:e.isCustom))]}))},isGetColorPaletteLoading:!1,setIsGetColorPaletteLoading:t=>e({isGetColorPaletteLoading:t}),threadSlideTemplateUid:"",setThreadSlideTemplateUid:t=>e({threadSlideTemplateUid:t}),colorPaletteStatus:"failed",setColorPaletteStatus:t=>e({colorPaletteStatus:t}),isSaveColorPaletteLoading:!1,setIsSaveColorPaletteLoading:t=>e({isSaveColorPaletteLoading:t}),themeColor:s.e,setThemeColor:t=>e({themeColor:t}),isAiGeneratingThemeColors:!1,setIsAiGeneratingThemeColors:t=>e({isAiGeneratingThemeColors:t})}));t.Z=r},48518:function(e,t,a){let n=(0,a(75910).Ue)(e=>({currentData:void 0,templateData:void 0,setCurrentData:t=>e({currentData:t}),setTemplateData:t=>e({templateData:t}),clearCurrentData:()=>e({currentData:void 0}),clearTemplateData:()=>e({templateData:void 0})}));t.Z=n},78236:function(e,t,a){let n=(0,a(75910).Ue)((e,t)=>({homeFiles:[],setHomeFiles:t=>e(e=>({...e,homeFiles:t})),files:[],setFiles:t=>e(e=>({...e,files:t})),isUploading:!1,setIsUploading:t=>e({isUploading:t}),documents:[],setDocuments:t=>e({documents:t}),chatDocumentsCounts:0,setChatDocumentsCounts:t=>e({chatDocumentsCounts:t}),threadFiles:[],setThreadFiles:t=>e(e=>({...e,threadFiles:t})),currentFileProgress:0,setCurrentFileProgress:t=>e({currentFileProgress:t}),previousSearchCategory:null,setPreviousSearchCategory:t=>e({previousSearchCategory:t}),removeHomeFilesById:a=>{let n=t().homeFiles;e({homeFiles:[...null==n?void 0:n.filter(e=>!a.includes(e.id))]})},removeFilesById:a=>{let n=t().files;e({files:[...null==n?void 0:n.filter(e=>!a.includes(e.id))]})},nThUpload:0,setNThUpload:t=>e({nThUpload:t}),isImageUploading:!1,setIsImageUploading:t=>e({isImageUploading:t}),homeImages:[],setHomeImages:t=>e({homeImages:t}),threadImages:[],setThreadImages:t=>e({threadImages:t}),isOpenFirstUseModal:!1,setIsOpenFirstUseModal:t=>e({isOpenFirstUseModal:t}),removeHomeImageSById:a=>{let n=t().homeImages;e({homeImages:[...null==n?void 0:n.filter(e=>!a.includes(e.id))]})},homeImageSQustions:[],setHomeImagesQustions:t=>e({homeImageSQustions:t}),isImageChat:!0,setIsImageChat:t=>e({isImageChat:t}),isGoToSearch:!1,setIsGoToSearch:t=>e({isGoToSearch:t})}));t.Z=n},88708:function(e,t,a){a.d(t,{OX:function(){return u},Of:function(){return f},Sc:function(){return o},Sq:function(){return g},YX:function(){return i},el:function(){return l},mt:function(){return p},qG:function(){return c},u1:function(){return d},uI:function(){return m},wd:function(){return h}});var n=a(78017),s=a(25994),r=a(81555);let o=e=>e===s.PN,i=e=>e===s.$8||e===s.PN,l=e=>{var t;return null===(t=e.params)||void 0===t?void 0:t.some(e=>i(e.type))},c=e=>{var t;return null===(t=e.params)||void 0===t?void 0:t.some(e=>e.type===s.PN)},d=e=>{var t;return null===(t=e.params)||void 0===t?void 0:t.some(e=>e.type===s.Kp)},u=e=>{var t;return null===(t=e.params)||void 0===t?void 0:t.some(e=>e.name===n.TU)},m=e=>{var t,a;return!!e&&(e.code===n.m5||e.code===n.PZ||(e.template_type===r.W.DEFAULT?!!(null===(t=e.params)||void 0===t?void 0:t.some(e=>"file"===e.type)):e.template_type===r.W.CUSTOM&&!(null===(a=e.params)||void 0===a?void 0:a.some(e=>"hide_file"===e.type))))},h=e=>!!e.code&&[n.m5,n.PZ].includes(e.code),p=e=>{if(e.template_type===r.W.CUSTOM){var t;return!(null===(t=e.params)||void 0===t?void 0:t.some(e=>"hide_image"===e.type))}return!0},f=e=>e.code===n.m5||e.code===n.PZ,g=e=>{try{var t,a,n,s;if(!(null==e?void 0:null===(a=e.sub_topics)||void 0===a?void 0:null===(t=a[0])||void 0===t?void 0:t.tools))return{external_tool_services:[],mcp_services:[]};let r=e.sub_topics[0].tools,o=r.find(e=>"external_tool_services"===e.name),i=r.find(e=>"mcp_services"===e.name),l=(null==o?void 0:null===(n=o.config)||void 0===n?void 0:n.list)||[],c=(null==i?void 0:null===(s=i.config)||void 0===s?void 0:s.list)||[],d=l.filter(e=>"user"===e.attribution&&e.select_status),u=c.filter(e=>"user"===e.attribution&&e.select_status);return{external_tool_services:d,mcp_services:u}}catch(e){return{external_tool_services:[],mcp_services:[]}}}},15893:function(e,t,a){a.d(t,{D:function(){return n},n:function(){return s}});let n=e=>{var t,a,n;return(null===(t=e.creator)||void 0===t?void 0:t.name)||(e.system?"Felo.ai":(null==e?void 0:null===(a=e.user)||void 0===a?void 0:a.name)?null==e?void 0:null===(n=e.user)||void 0===n?void 0:n.name:"")},s=e=>[{id:"1573ae54-58cb-4cdd-a9ef-2c30b4811f65",name:"Notion",icon:"/icons/mcp/notion.svg",description:e("agent.mcp_servers_notion_desc"),hidden:!1,disabled:!1,scope_auth:"personal",attribution:"user",auth_status:!1},{id:"1573ae54-58cb-4cdd-a9ef-2c30b4811f62",name:"Gmail",icon:"/icons/mcp/gmail.svg",description:e("agent.mcp_servers_gmail_desc"),hidden:!1,disabled:!1,scope_auth:"personal",attribution:"user",auth_status:!1}]},44509:function(e,t,a){a.d(t,{T:function(){return s},Y:function(){return n}});let n=async(e,t,a)=>{var n;let s=e.getBoundingClientRect(),r=null===(n=document.querySelector("#".concat(t)))||void 0===n?void 0:n.getBoundingClientRect();if(!r){null==a||a();return}let{width:o,left:i,top:l}=s,{left:c,bottom:d,height:u,width:m}=r,h=e.animate([{transformOrigin:"top",transform:"translate(0, 0) scale(1)",opacity:1},{opacity:0,transform:"translate(".concat(c-i+(m-o)/2,"px, ").concat(d-l-u/2,"px) scale(0)"),transformOrigin:"top"}],{duration:300,fill:"forwards"});await h.finished,null==a||a()},s=async(e,t,a)=>{var n;let s=e.getBoundingClientRect(),r=null===(n=document.querySelector("#".concat(t)))||void 0===n?void 0:n.getBoundingClientRect();if(!r){null==a||a();return}let{width:o}=s,{left:i,top:l}=r,c=window.innerWidth/2,d=window.innerHeight/2,u=e.animate([{transformOrigin:"top",transform:"translate(0, 0) scale(1)",opacity:1},{opacity:0,transform:"translate(".concat(i-c-o/2,"px, ").concat(l-d,"px) scale(0)"),transformOrigin:"top"}],{duration:600,fill:"forwards"});await u.finished,null==a||a()}},21230:function(e,t,a){a.d(t,{x:function(){return n}});let n=e=>"application/pdf"===e||"application/msword"===e||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===e},34276:function(e,t,a){a.d(t,{f:function(){return r}});var n=a(97247),s=a(60635);let r=async e=>{let{query:t,setLoading:a}=e;if((0,n.Eg)()){if(!t)return!1;a(!0),(0,s.mN)(t);try{let e=await (0,s.C1)({type:"onGetHKTVMallQueryStatus",timeout:4e3});if(console.log("isValidatedQuery",e),a(!1),!0!==e)return!1}catch(e){return console.log("\uD83D\uDE80 ~ onSubmit ~ error:",e),a(!1),!1}}return!0}},80542:function(e,t,a){a.d(t,{x:function(){return s}});var n=a(65819);let s=()=>{var e,t;let a="9f509932d99246e6afcd2a0a1f6f1ea4";if(!a)return!1;let{userInfo:s}=n.ZP.getState(),r=null==s?void 0:null===(t=s.user_org_member)||void 0===t?void 0:null===(e=t.org)||void 0===e?void 0:e.org_id;return!!r&&r===a}},63023:function(e,t,a){a.d(t,{$Q:function(){return o},CE:function(){return u},G3:function(){return g},P2:function(){return r},WJ:function(){return m},Xz:function(){return f},e:function(){return p},gI:function(){return h},pJ:function(){return d},s3:function(){return n},ui:function(){return s}});let n=()=>{var e;return(null===(e=location.href.match(/slides\/([^?]+)/))||void 0===e?void 0:e[1])||""},s=e=>{var t,a,n,s,r,o,i;return{uuid:(null==e?void 0:e.id)||"",name:(null==e?void 0:e.name)||"",logo:(null==e?void 0:null===(t=e.logo)||void 0===t?void 0:t.url)||"",font:(null==e?void 0:null===(a=e.font)||void 0===a?void 0:a.url)||"",font_name:(null==e?void 0:null===(n=e.font)||void 0===n?void 0:n.name)||"",primary_color:(null==e?void 0:null===(s=e.theme)||void 0===s?void 0:s.primary_color)||"",text_on_background:(null==e?void 0:null===(r=e.theme)||void 0===r?void 0:r.text_on_background)||"",background_color:(null==e?void 0:null===(o=e.theme)||void 0===o?void 0:o.background_color)||"",auxiliary_colors:(null==e?void 0:null===(i=e.theme)||void 0===i?void 0:i.auxiliary_colors)||[],style_name:null==e?void 0:e.style_name}},r=e=>({id:(null==e?void 0:e.uuid)||"",name:(null==e?void 0:e.name)||"",logo:{url:(null==e?void 0:e.logo)||""},font:{url:(null==e?void 0:e.font)||"",name:(null==e?void 0:e.font_name)||""},theme:{style_name:null==e?void 0:e.style_name,primary_color:null==e?void 0:e.primary_color,text_on_background:null==e?void 0:e.text_on_background,background_color:null==e?void 0:e.background_color,auxiliary_colors:(null==e?void 0:e.auxiliary_colors)||[]}}),o=e=>({style_name:(null==e?void 0:e.style_name)||(null==e?void 0:e.name)||"",description:"",colors:{primary_color:null==e?void 0:e.primary_color,text_on_background:null==e?void 0:e.text_on_background,background_color:null==e?void 0:e.background_color,auxiliary_colors:(null==e?void 0:e.auxiliary_colors)||[]}}),i=(e,t,a)=>{let[n,s,r]=[e,t,a].map(e=>{let t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)});return .2126*n+.7152*s+.0722*r},l=(e,t)=>(Math.max(e,t)+.05)/(Math.min(e,t)+.05),c=e=>{let t=e.replace("#","").match(/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},d=(e,t)=>{let a=0,n=0,s=0;if(e.startsWith("#")){let t=c(e);if(!t)return"#000000";({r:a,g:n,b:s}=t)}else{if(!e.startsWith("rgb"))return"#000000";let t=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(!t)return"#000000";[,a,n,s]=t.map(Number)}let r=i(a,n,s);if(t){let e=0,a=0,n=0;if(t.startsWith("#")){let s=c(t);s&&({r:e,g:a,b:n}=s)}else if(t.startsWith("rgb")){let s=t.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);s&&([,e,a,n]=s.map(Number))}if(l(r,i(e,a,n))>=4.5)return t}return l(r,1)>l(r,0)?"#ffffff":"#000000"},u=e=>{let t=[];return e?(e.primary_color&&"string"==typeof e.primary_color&&""!==e.primary_color.trim()||t.push("primary_color must be a non-empty string"),e.text_on_background&&"string"==typeof e.text_on_background&&""!==e.text_on_background.trim()||t.push("text_on_background must be a non-empty string"),e.background_color&&"string"==typeof e.background_color&&""!==e.background_color.trim()||t.push("background_color must be a non-empty string"),e.auxiliary_colors?Array.isArray(e.auxiliary_colors)?5!==e.auxiliary_colors.length?t.push("auxiliary_colors must contain 5 elements, currently contains ".concat(e.auxiliary_colors.length)):e.auxiliary_colors.forEach((e,a)=>{e&&"string"==typeof e&&""!==e.trim()||t.push("auxiliary_colors[".concat(a,"] must be a non-empty string"))}):t.push("auxiliary_colors must be an array"):t.push("auxiliary_colors cannot be empty"),{isValid:0===t.length,errors:t}):(t.push("Theme data cannot be empty"),{isValid:!1,errors:t})},m=e=>{let{isValid:t}=u(e);return t},h="bg-[#F6F7F9] dark:bg-[#353B47] border-none  text-base md:text-base h-12 rounded-[10px] px-[12px] text-[#72717A] dark:text-[#ffffff]",p={style_name:"",description:"Felo AI Custom Theme",colors:{primary_color:"",auxiliary_colors:[,,,,,].fill(""),background_color:"",text_on_background:""}},f=[{id:"1",style_name:"theme_premium_business_style",description:"Confident, authoritative and vibrant business color scheme that conveys high quality and professional insights.",colors:{primary_color:"#BB271A",auxiliary_colors:["#990000","#FF3333","#E6E6E6","#B3B3B3","#666666"],background_color:"#FDFDFD",text_on_background:"#333333"}},{id:"2",style_name:"theme_academic_research_style",description:"Professional, clear and focused color scheme that facilitates deep thinking and insights.",colors:{primary_color:"#FFAE00",auxiliary_colors:["#FFC14D","#FFDE99","#666666","#A6A6A6","#E0E0E0"],background_color:"#F7F7F7",text_on_background:"#333333"}},{id:"3",style_name:"theme_premium_business_style",description:"Professional, stable and trustworthy, creating an efficient and refined visual experience.",colors:{primary_color:"#003368",auxiliary_colors:["#00458C","#6688B0","#AABBDD","#CCDDFF","#EBF0F7"],background_color:"#F7F9FC",text_on_background:"#333333"}},{id:"4",style_name:"theme_premium_business_style",description:"Professional, authoritative and composed, this color scheme showcases corporate strength and reliable reputation.",colors:{primary_color:"#2C3E50",auxiliary_colors:["#4A6C8C","#6E8BA3","#9FBCCC","#BFDAEA","#E0EFF9"],background_color:"#F8FAFC",text_on_background:"#333333"}},{id:"5",style_name:"theme_dynamic_professional_contrast",description:"Highlighting key points through complementary colors, creating a professional and dynamic visual impact.",colors:{primary_color:"#003366",auxiliary_colors:["#FF6600","#FF9933","#FFCC99","#555555","#AAAAAA"],background_color:"#F7F7F7",text_on_background:"#333333"}},{id:"6",style_name:"theme_tech_futuristic_style",description:"Modern tech aesthetic fused with futurism, delivering a visual experience of innovation, foresight and efficiency.",colors:{primary_color:"#007AFF",auxiliary_colors:["#0056B3","#339CFF","#66B2FF","#99CCFF","#CCEAFF"],background_color:"#F0F8FF",text_on_background:"#333333"}},{id:"7",style_name:"theme_premium_business_style",description:"Professional, stable yet stylish, creating trust and premium feel, perfect for high-end business presentations.",colors:{primary_color:"#79573E",auxiliary_colors:["#A88F6F","#5C432F","#D4C2A6","#EFEBE9","#BDBDBD"],background_color:"#F8F5F2",text_on_background:"#333333"}},{id:"8",style_name:"theme_academic_research_style",description:"Calm and professional, deep as a forest, evoking contemplation and trust.",colors:{primary_color:"#3D8532",auxiliary_colors:["#2A5C24","#66B26A","#99CC99","#C1DEC1","#E0F2E0"],background_color:"#F0F8F0",text_on_background:"#333333"}},{id:"9",style_name:"theme_profound_scholarly_glow",description:"Calm yet inspiring, providing a warm and clear visual backdrop for in-depth academic discussions.",colors:{primary_color:"#E1853D",auxiliary_colors:["#C17737","#D29B6C","#A67D4F","#6B4226","#F6E9D8"],background_color:"#FDFBF8",text_on_background:"#333333"}},{id:"10",style_name:"theme_sophisticated_depth",description:"Deep and luxurious visual experience, showcasing ultimate professionalism and composure, creating a premium atmosphere.",colors:{primary_color:"#9D27DD",auxiliary_colors:["#BB6BD9","#8B44B3","#4A2C68","#D2D2D2","#666666"],background_color:"#212121",text_on_background:"#F0F0F0"}},{id:"11",style_name:"theme_tech_futuristic_style",description:"Inspiring cutting-edge technology and futuristic feel, showcasing innovation, precision and minimalism.",colors:{primary_color:"#0AFFFB",auxiliary_colors:["#00FFE0","#00C6FF","#0099FF","#5B676C","#C2FBFB"],background_color:"#0F0F0F",text_on_background:"#F0F0F0"}},{id:"12",style_name:"theme_deep_tech_vision",description:"Using deep backgrounds to highlight the mystery and depth of technology, showcasing forward-thinking design aesthetics.",colors:{primary_color:"#007AFF",auxiliary_colors:["#B0E0E6","#00FFFF","#00CED1","#4682B4","#5F9EA0"],background_color:"#1A1A2E",text_on_background:"#F0F0F0"}}],g=e=>e||("undefined"==typeof navigator?"en":navigator.language||"en")},93734:function(e,t,a){a.d(t,{Y:function(){return s},h:function(){return r}});var n=a(36551);let s=e=>{let t="";switch(e){case n.gl:case n.ti:case n.rN:t="extension.all";break;case n.pN:t="extension.social";break;case n.Kp:t="extension.academic";break;case n.hs:t="extension.document";break;case n.zA:t="extension.xiaohongshu";break;case n.X7:t="extension.twitter";break;case n.xn:t="extension.reddit";break;case n.aI:case n.Bv:t="extension.chat";break;case n.J5:t="extension.chat_with_document";break;case n.Wh:t="extension.search_agent";break;case n.V9:t="extension.web_summary";break;case n.Ys:t="extension.chat_with_image";break;case n.RQ:t="topic.topic";break;case n.Ts:t="extension.chat_with_voice"}return t},r=e=>{let t="";switch(e){case n.gl:t="extension.all";break;case n.pN:t="extension.social_search";break;case n.Kp:t="extension.academic_search";break;case n.hs:t="extension.document_search";break;case n.zA:t="extension.xiaohongshu_search";break;case n.X7:t="extension.twitter_search";break;case n.xn:t="extension.reddit_search";break;case n.aI:t="extension.chat";break;case n.RQ:t="topic.topic"}return t}}}]);